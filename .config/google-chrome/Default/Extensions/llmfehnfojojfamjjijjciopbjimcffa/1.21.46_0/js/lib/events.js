var Events=(function(){var d=function(){var k=new Delegate();function i(n,m){if(typeof Reports!=="undefined"){Reports.error(new ErrorMessage(n,m));}}function l(m){k.invoke(m);}(function j(){if(chrome.tabs.cr_tabs_TabSelectionChanged_listeners_added==undefined&&chrome.tabs.hasOwnProperty("onActivated")){chrome.tabs.onActivated.addListener(l);chrome.tabs.cr_tabs_TabSelectionChanged_listeners_added=true;}})();return{addEventListener:function(m){if(typeof m==="function"){return k.addObserver(m);}}};};var f=function(){var i=new Delegate();function k(n,m){if(typeof Reports!=="undefined"){Reports.error(new ErrorMessage(n,m));}}function j(n,m){i.invoke(n,m);}(function l(){if(chrome.tabs.cr_tabs_TabClosed_listeners_added==undefined){chrome.tabs.onRemoved.addListener(j);chrome.tabs.cr_tabs_TabClosed_listeners_added=true;}})();return{addEventListener:function(m){if(typeof m==="function"){return i.addObserver(m);}}};};var e=function(){var k=new Delegate();function i(n,m){if(typeof Reports!=="undefined"){Reports.error(new ErrorMessage(n,m));}}function l(m){k.invoke(m);}(function j(){if(chrome.tabs.cr_tabs_TabCreated_listeners_added==undefined){chrome.tabs.onCreated.addListener(l);chrome.tabs.cr_tabs_TabCreated_listeners_added=true;}})();return{addEventListener:function(m){if(typeof m==="function"){return k.addObserver(m);}}};};var b=function(k,l,r){var n;function m(t,s){if(typeof Reports!=="undefined"){Reports.error(new ErrorMessage(t,s));}}function p(t){var s=false;if(!n.isEmpty()){if((t.url.indexOf("http")>=0)||(t.url.indexOf("file")>=0)){s=true;if(t.type=="main_frame"){if(typeof Crossrider!=="undefined"&&Crossrider.hasOwnProperty("_tabsUrlsByIds")){Crossrider._tabsUrlsByIds[t.tabId]=t.url;if(typeof Crossrider._framesUrlsByIds[t.tabId]==="undefined"){Crossrider._framesUrlsByIds[t.tabId]={};}}}else{if(t.type=="sub_frame"){if(typeof Crossrider!=="undefined"&&Crossrider.hasOwnProperty("_framesUrlsByIds")){if(typeof Crossrider._framesUrlsByIds[t.tabId]==="undefined"){Crossrider._framesUrlsByIds[t.tabId]={};}Crossrider._framesUrlsByIds[t.tabId][t.frameId]=t.url;}}}}}return s;}function q(t){function u(v){var w=true;if(IsDefined(v)){if(v.hasOwnProperty("redirectTo")&&(typeof(v.redirectTo)==="string"&&v.redirectTo.length>0)){return new ObserverResult(w,{redirectUrl:v.redirectTo});}if(v.hasOwnProperty("cancel")&&(v.cancel===true)){return new ObserverResult(!w,{cancel:true});}}}var s=null;if(k==="OldOnRequest"||k==="OnRequest"){if(r){s=n.invokeWithCallback(u,{requestUrl:t.url,pageUrl:Crossrider._tabsUrlsByIds[t.tabId],iframeUrl:Crossrider._framesUrlsByIds[t.tabId]?Crossrider._framesUrlsByIds[t.tabId][t.frameId]:undefined,method:t.method});}else{s=n.invokeWithCallback(u,t.url,Crossrider._tabsUrlsByIds[t.tabId]);}}else{if(k==="OldOnBeforeNavigate"||k==="OnBeforeNavigate"){if(r){s=n.invokeWithCallback(u,{pageUrl:t.url});}else{s=n.invokeWithCallback(u,t.url);}}else{Reports.error(new ErrorMessage(new Error("wrong name on webRequest"),"Events->handleUserResult"));}}return s;}function j(t){var s=undefined;if(t.hasOwnProperty("isHaltOperation")&&t.isHaltOperation){if(t.hasOwnProperty("returnValues")){var u=t.returnValues[t.returnValues.length-1];if(IsDefined(u)&&u.hasOwnProperty("redirectUrl")&&typeof(u.redirectUrl)==="string"&&u.redirectUrl.length>0){s={redirectUrl:u.redirectUrl};}}}return s;}function i(s){var v=false;if(s.hasOwnProperty("returnValues")){var t;for(var u=0;u<s.returnValues.length;++u){currentObserversResult=s.returnValues[u];if(IsDefined(currentObserversResult)&&currentObserversResult.hasOwnProperty("cancel")){v=true;break;}}}return v;}var o=this;this.init=function(){if(typeof chrome.webRequest!=="undefined"&&chrome.webRequest["cr_"+k+"_listeners_added"]==undefined){chrome.webRequest.onBeforeRequest.addListener(function(s){return o.webRequestHandler(s);},l,["blocking"]);chrome.webRequest["cr_"+k+"_listeners_added"]=true;n=new Delegate();}};this.webRequestHandler=function(t){var v=false;if(p(t)==true){var s=q(t);if(IsDefined(s)){var u=j(s);if(IsDefined(u)){return u;}v=i(s);}}return{cancel:v};};this.addEventListener=function(u,t){var s=null;if(typeof u==="function"){s=n.addObserver(u,t);}return s;};this.remove=function(s){return n.removeObserver(s);};this.removeAll=function(){return n.removeAllObservers();};this.updateOpaque=function(s,t){return n.updateObserverOpaque(s,t);};return this;};var c=function(){var i=new b("OldOnRequest",{urls:["<all_urls>"]});return{init:i.init,addEventListener:i.addEventListener,remove:i.remove,removeAll:i.removeAll,updateOpaque:i.updateOpaque};};var a=function(){var i=new b("OldOnBeforeNavigate",{urls:["<all_urls>"],types:["main_frame"]});return{init:i.init,addEventListener:i.addEventListener,remove:i.remove,removeAll:i.removeAll,updateOpaque:i.updateOpaque};};var h=function(){var i=new b("OnRequest",{urls:["<all_urls>"]},true);return{init:i.init,addEventListener:i.addEventListener,remove:i.remove,removeAll:i.removeAll,updateOpaque:i.updateOpaque};};var g=function(){var i=new b("OnBeforeNavigate",{urls:["<all_urls>"],types:["main_frame"]},true);return{init:i.init,addEventListener:i.addEventListener,remove:i.remove,removeAll:i.removeAll,updateOpaque:i.updateOpaque};};return{tabSelectionChanged:d(),tabClosed:f(),tabCeated:e(),oldWebRequest:c(),oldBeforeNavigate:a(),webRequest:h(),beforeNavigate:g()};})();
