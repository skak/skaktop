var debug_mode=0;void 0===window.localStorage.debugLevel&&(console.log("Debug Level Not Stored Yet, setting to 0 as default"),window.localStorage.debugLevel=0);debug_mode=window.localStorage.debugLevel;console.log("in POPUP page - Debug Mode from Local Storage is: "+debug_mode);void 0===window.localStorage.notifLevel&&(console.log("Notif Pref Level Not Stored Yet, setting to 3 [verbose] as default"),window.localStorage.notifLevel=3);
void 0===window.localStorage.overridePrefix&&(console.log("Override Prefix Setting Not Stored Yet in Local Storage, setting to 1 as default"),window.localStorage.overridePrefix=1);void 0===window.localStorage.autoCloseLevel&&(console.log("Auto Close Window on Reply - -Setting Not Stored Yet in Local Storage, setting to 1 as default"),window.localStorage.autoCloseLevel=1);
function _eb37f38824bc114a1b286095ed313ce54faa0bbb5ec475005d2a5e68419080231b038c154aefaeed(a){contacts=[];for(var a=JSON.parse(a),c=0,b;b=a.feed.entry[c];c++){var e={name:b.title.$t,id:b.id.$t,emails:[],phonenums:[]};if(b.gd$email)for(var d=b.gd$email,h=0,g;g=d[h];h++)e.emails.push(g.address);e.name||(e.name=e.emails[0]||"<Unknown>");if(b.gd$phoneNumber){d=b.gd$phoneNumber;for(h=0;g=d[h];h++)e.phonenums.push(g.$t)}b.gd$phoneNumber&&contacts.push(e)}_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1()}
function _6dc1628ad5a5556625697efb35c149e14377b7b9b932db439388357e8a8f6ef9d20cedad7494e489(){document.getElementById("resultholder").innerHTML=resultdivclean}
function _c97f041af3626de5e36f8057da0980c565eb8ba4fbabca5f0e644370f6b66f721313053d341a2b4c(){for(var a=document.getElementById("resultholder"),c=0,b;b=contacts[c];c++){var e=document.createElement("div"),d=document.createElement("p"),h=document.createElement("ul");d.innerText=c+" - "+b.name+" - "+b.phonenums[0]+" - "+b.phonenums[1]+" - "+_824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(b.phonenums[0]);e.appendChild(d);for(var d=0,g;g=b.emails[d];d++){var i=document.createElement("li");
i.innerText=g;h.appendChild(i)}a.appendChild(e)}}var textcontent="STARTING_TEXT_MSG",selected_tab=0,sign_in_state=0,google_login_status=!1,login_and_beta_ready=!1,google_username_currently_logged_in="",extra_login_status_info="",most_recent_text_sent_status=0,smsarray=[];console.log(11111);
function _719065480e5f8fd606557846f557e1372eb7e2db894d0769b566591364920a5bc260b688b6721750(){dest_num="+14158684689";_7cf7a1890e10d6e758b51737080dbd7d24b53fc892fd59462f807ce7e2f9e8059d51d1a1cc238132("Test SMS from MightyText",999)}
function _6cb0b2b3123aa5f845519940b7c85f0e2d68a8c7eae0dcaf43919f35fb4f9ea0a1081fc7441ba08b(a,c,b){"send-one-text"==a?_gaq.push(["_trackEvent","Popup","Send-SMS-Click","Single-Compose",1]):0<which_phone_num_from_hash_tag_in_url.length?_gaq.push(["_trackEvent","Popup","Send-SMS-Click","Inline-Reply-Single-Notif-Response",1]):_gaq.push(["_trackEvent","Popup","Send-SMS-Click","Inline-Reply-InApp-Tab",1]);most_recent_text_sent_status=0;var e=document.getElementById(a).value,d="error-text-content-"+b,h=
/\d/;""==e||0==e.indexOf("\n")?(document.getElementById(a).value="",document.getElementById(d).innerHTML="Text Message is Blank! "):!1==h.test(c)?document.getElementById(d).innerHTML="'Send To'  must contain a number.":(document.getElementById(a).focus(),dest_num=c,_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Destination Phone Num is: "+dest_num),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Target Num from  is: "+c),320<e.length?
document.getElementById(d).innerHTML="Text Message is too long. "+e.length+" (max is 320)":160<e.length?(_f024cddaeda993f65759ce1e47a7ab50e7569224e8bf0165745af0b3796c16df6ba4bc007c6b670f(a,c,b,e.substring(0,160)),_f024cddaeda993f65759ce1e47a7ab50e7569224e8bf0165745af0b3796c16df6ba4bc007c6b670f(a,c,b,e.substring(160,319))):_f024cddaeda993f65759ce1e47a7ab50e7569224e8bf0165745af0b3796c16df6ba4bc007c6b670f(a,c,b,e))}
function _f024cddaeda993f65759ce1e47a7ab50e7569224e8bf0165745af0b3796c16df6ba4bc007c6b670f(a,c,b,e){document.getElementById(a).value="";db.transaction(function(a){var h=Math.floor(1E10*Math.random())+"A",g=new Date,g=_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257(g);console.log("textreplycontent RIGHT BEFORE SQL Insert is: "+e);a.executeSql("INSERT INTO Messages (googleusername,msgid,time_client,time_server,from_phone_num,body,type,status,source) VALUES (?,?,?,?,?,?,?,?,?)",
[google_username_currently_logged_in,h,g,g,c,e,1,-99,2],function(){just_added_msg_id=h;_7cf7a1890e10d6e758b51737080dbd7d24b53fc892fd59462f807ce7e2f9e8059d51d1a1cc238132(e,just_added_msg_id);var a=b+"-texts",c="";80>e.length&&(c='style="display:inline;line-height: 35px"');_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("This send box  is: "+a);document.getElementById(a).innerHTML+='<li id="sms-line-item-msgid-'+just_added_msg_id+'" class="sms-line-item sms-reply" style="mmargin-left:20px"><span class="sms-body" '+
c+">"+e+'</span>  <span class="sms-time">'+_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(g)+'</span>  <span id="send-status-msgid-'+just_added_msg_id+'" class="outbound-state-info" style="color:maroon;font-size:10px"> Sending Request to Phone... </span> <img id="send-in-progress-image-animation-msgid-'+just_added_msg_id+'" src="loading_icon_transparent.gif" style="width:24px;height:24px"> <span class="message-action-links"><img id="red-close-button-for-msgid-'+
just_added_msg_id+'" src="red-close-x.png" class="HoverBorder" style="display:none" align="middle" height="11" width="11" onclick="_2fb0fa072448fc34cd28e42cc9759d99704a01291adf3ff6e7cb682091b86bb7d0ea6010b31b9fdf(\''+just_added_msg_id+"')\"> </span> </li>";document.getElementById("sms-line-item-msgid-"+just_added_msg_id).style.backgroundColor="#EAEAEA";a="#"+a;$(a).scrollTop(2E4+$(a).height())},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function OLD_moved_to_texty_dot__bedebe796eeeccf177110f385f377eafb3354985d574c24b623c1073a5b9a332b77a7ca39d4f4df4(a,c){db.transaction(function(b){b.executeSql("INSERT INTO LocalGoogleContacts (googleusername,phone_num,contact_name) VALUES (?,?,?)",[google_username_currently_logged_in,a,c],function(){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Added  Contact to local SQL: ' + contact_name_to_insert")},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _7cf7a1890e10d6e758b51737080dbd7d24b53fc892fd59462f807ce7e2f9e8059d51d1a1cc238132(a,c){_64a75910a26853852fd02b82a173fd0c7c25bab8ba7cf3b462401f7a89ea76d953276bc52f5622c0("send_sms",a,c,_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec)}
function _76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec(a,c,b){$("#msg").css("visibility","visible");a==STATUS_SUCCESS?(_395d827bd89d4e8f7c3eb37121cacc0f1132531ba699348432ae30761b6892a03041b814831abb2d(),document.getElementById("msg").innerHTML="Request sent to phone.. SMS to "+dest_num,_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Attempting to Mark Local Record SENT..."),_e37fec9cd37af62c94ce3c7a80fcdbba5c3f325dbbbd695fab5bc848b2a503f7d8eff503e5f33dd9(c),
_60b5ba38781a67102f22ef14061b2a119ddb827e52fc96fcb2f69baa2c9783a5f87028f8213a5730(),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Sent C2DM message, make quick polling now to check for ACK.... decrease polling frequency")):a==STATUS_LOGIN_REQUIRED?(a='<a href="#" onclick="chrome.tabs.create({url: \''+signInUrl+"'})\">"+chrome.i18n.getMessage("sign_in_message")+"</a>",document.getElementById("msg").innerHTML=chrome.i18n.getMessage("sign_in_required_message",a)):
a==STATUS_DEVICE_NOT_REGISTERED?(document.getElementById("msg").innerHTML=chrome.i18n.getMessage("device_not_registered_message"),_gaq.push(["_trackEvent","Popup","ERROR-C2DM","DEVICE-NOT-REGISTERED",1])):(document.getElementById("msg").innerHTML=chrome.i18n.getMessage("error_sending_message",b.responseText),_gaq.push(["_trackEvent","Popup","ERROR-C2DM",b.responseText,1]))}
function _60b5ba38781a67102f22ef14061b2a119ddb827e52fc96fcb2f69baa2c9783a5f87028f8213a5730(){_763fb60d359c5242ba9b60a9512a43c80b7ffd4a7753c440acd81df2c94775f4e066cd8c2cc10040(!0);var a=document.getElementById("signout");a.innerHTML="Sign Out";a.style.color="blue";a.onclick=function(){chrome.tabs.create({url:signOutUrl})}}function _0396764bc9c42287af34848874f904bad596b43218ef15316e9ca51b6e2c52f374f457fdec036968(a){document.getElementById("signout").style.visibility=a}
function _f404e75d1b46540f7413657eb1f803d394eceb106d438f23010203dfe40bfec8034252e1450aa29f(a){for(var c=(new Date).getTime(),b=0;1E7>b&&!((new Date).getTime()-c>a);b++);}
function _8fa942b94430672c1d14e528925a86fe9f303a2041f3763741453348cf577d522f4b2275f72eb6d0(){document.getElementById("msg").innerHTML="";document.getElementById("top-notif-bar").innerHTML="";document.getElementById("results").innerHTML='<span id="refresh-indicator"><img src="ajax-spinner-green.gif" style="margin-left:20px"><span>'}
function _91f536e7d7bd855151876f5a748fa7f58a6e68d3f8237d8959e03355010bb85cc3dc46a46fb31110(){document.getElementById("fb-like-button").innerHTML='<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FTexty%2F156773284381924&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font&amp;colorscheme=dark&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe>'}
function _a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1(a){db||(db=openDatabase("Texty","1.0","Texty-SMS",2E5));_c00ce83606da44266efad0b4abf7a97e8481a962c3e27b2e7baee14b3ad1b08e60fc9acb63cb5538();_5c8c7cc7f3896e56a19222d7a8378b2e917bb77ea8782e82e16d00d00e35482889e0b2bb38ca598c();_254b536df1f8d5023e6547e90ddc4441186dde53eb248c06d3189c81d5613f272576615020d4bd03();_gaq.push(["_trackEvent","Popup","Refresh-Page","",1]);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("In Full Refresh -- Current google_login_status is "+
google_login_status);_e5ec7f980c01d8fa2fd92d0138458de9c95be4c949b506bf4ef2d9924df02549d5720823441daa5e();selected_tab=$("#results").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=0);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("SMSarray count is "+smsarray.length);void 0!=a&&(document.getElementById("msg").innerHTML=a,$("#msg").css("visibility","visible"),$("#msg").fadeOut(4E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _129d40a54822eb507f5977432f63ff3ba8736be9ce58c22f8ab9fea0d543f60632c6f007cbd8a283(){console.log("in _129d40a54822eb507f5977432f63ff3ba8736be9ce58c22f8ab9fea0d543f60632c6f007cbd8a283");0<smsarray.length?console.log("setviewportarea"):(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Zero Messages in Local store retrieved...show quick note to user telling them..."),document.getElementById("results").innerHTML='<span style="font-size:14px;color:blue"><B><br>Currently no text messages. Hit Compose New to send a new Text Message</B></span>')}
function _cbf5231288281d4241e7fee67a522a404548c98180eb7282fa375b94f0e5d2726f61f9d98af0f7a9(a,c,b){document.getElementById(a).style.visibility=c;document.getElementById(a).style.height=b}
function _0f2a6a242ab30ab1350969fd234bc47a81eb0788befe497a740c8f4aabb635c06f07549336d5360d(){!google_login_status||!login_and_beta_ready?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("while in contacts retrieval, found out user not logged in or beta ready, so break out..."):(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("about to call BG function to get google contacts info..."),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Getting LATEST GOOGLE CONTACTS from BACKGROUND PAGE..."),
chrome.extension.sendRequest({greeting:"call_from_popup_to_check_contact_info"},function(a){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Google Contacts Token status per the BG page is: "+a.google_contacts_token_status);"ACTIVE_GOOGLE_CONTACTS_TOKEN_STORED_LOCALLY"==a.google_contacts_token_status?(null==a.farewell?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("There was an active token, but no Google Contacts in BG page (array is null)"):
(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Getting LATEST GOOGLE CONTACTS from BACKGROUND PAGE..."+a.farewell.length+" contacts in array..."),contacts=a.farewell),null!=a.autocomplete_contacts_list&&(autocomplete_contacts=a.autocomplete_contacts_list)):(0<document.getElementById("top-notif-bar").innerHTML.length&&(document.getElementById("top-notif-bar").innerHTML+="<br>"),document.getElementById("top-notif-bar").innerHTML+='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:red"> Contacts not synced.</span>  <a href="#" onclick="window.close();_4eededfa984c507fee168ab12804983d32ec63f460e0f471d4c2fdde8724c32684d5aead0d647371();"> Sync MightyText with your Google Contacts</a> to see names <span style="font-size:10px"></span>');
console.log("*** about to call Traverse ***");REFACTOR__49ea1f50bfd1f453ae3880b13102d4ee1f57ead800f94deddb6ab4c9a13c428925e6eb70ba73e9de()}))}function _5c8c7cc7f3896e56a19222d7a8378b2e917bb77ea8782e82e16d00d00e35482889e0b2bb38ca598c(){smsarray=_276c1d89d1cb14d12c20660e1fe4814523b9a7494f72555dc81078938335b170b80c3fb6773f9471()}function _39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96(a,c){log.innerHTML+="<p>"+c.message+"</p>"}
function _276c1d89d1cb14d12c20660e1fe4814523b9a7494f72555dc81078938335b170b80c3fb6773f9471(){var a=[],c="SELECT *,substr(replace(replace(from_phone_num,' ',''),'-',''),-7) AS right_digits_phone_num FROM (SELECT * FROM Messages ORDER BY id DESC LIMIT 0,600) ORDER BY right_digits_phone_num,time_client";0<which_phone_num_from_hash_tag_in_url.length&&(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(which_phone_num_from_hash_tag_in_url),c="SELECT *,substr(replace(replace(from_phone_num,' ',''),'-',''),-7) AS right_digits_phone_num FROM Messages WHERE right_digits_phone_num=substr(replace(replace('"+
which_phone_num_from_hash_tag_in_url+"',' ',''),'-',''),-7) ORDER BY right_digits_phone_num,time_client");db.transaction(function(b){b.executeSql(c,[],function(b,c){for(var h=0,g=null;h<c.rows.length;h++)g=c.rows.item(h),a[h]=g,text_message_array[h]=g})});return a}
function _0774ff2fd5f24f982f9399723d17b8cabe6aea60a867de00c711504a6b5e881693b5c34e9f0599c5(a){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Checking if SMS completed full cycle yet from cloud...for msgid: "+a);db.transaction(function(c){c.executeSql("SELECT * FROM Messages WHERE msgid=?",[a],function(a,c){status_of_just_sent_message=c.rows.item(0).status;_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("status of this msg NOW is: "+
status_of_just_sent_message)})})}function _45335571e94e8d66aeffcc7c5aa0cacad25623d2cfd1799660639c006d19f3ca7ebd518a1d6e6ca2(a,c){db.transaction(function(b){b.executeSql("UPDATE Messages SET googleusername = ? WHERE id = ?",[c.innerHTML,a],null,_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _2fb0fa072448fc34cd28e42cc9759d99704a01291adf3ff6e7cb682091b86bb7d0ea6010b31b9fdf(a){db.transaction(function(c){c.executeSql("DELETE FROM Messages WHERE msgid=?",[a],function(){_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1("Deleted message. (on Chrome only)")},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _7010eeb6798c8dc3723fecddae4659492139b0dc486b4322de4515f9af9a18f80a1077e770ddf988(a){a="%"+a;_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Deleting all messages from this sender --- DELETE FROM Messages WHERE substr(replace(replace(from_phone_num,' ',''),'-',''),-7) LIKE "+a);db.transaction(function(c){c.executeSql("DELETE FROM Messages WHERE substr(replace(replace(from_phone_num,' ',''),'-',''),-7) LIKE ?",[a],function(){_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1("Deleted all text messages to/from this person (on Chrome only)")},
_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _1a7972d80071322bc0d555fb3d4d350f97e00ac607e65fb016f6f79d5310da3e83cec0c1aecd8720(a){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("in mark Read function");db.transaction(function(c){c.executeSql("UPDATE Messages SET status=1 WHERE msgid=?",[a],function(){_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1()},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _e37fec9cd37af62c94ce3c7a80fcdbba5c3f325dbbbd695fab5bc848b2a503f7d8eff503e5f33dd9(a){console.log("IN ************************* MARK LOCAL RECORD SENT SUCCESSFULLY **********************");_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Attempting SQL Local Record Sent to Cloud Successfully...");db.transaction(function(c){c.executeSql("UPDATE Messages SET status=51 WHERE msgid=? and status=-99",[a],function(){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Successfully updated MSGID "+
a+" from -99 to 51");0<which_phone_num_from_hash_tag_in_url.length&&0!=window.localStorage.autoCloseLevel&&setTimeout("window.close();",1500);document.getElementById("send-status-msgid-"+a).innerHTML+='<B style="color:green">OK</B>...Waiting for phone confirmation...';_0774ff2fd5f24f982f9399723d17b8cabe6aea60a867de00c711504a6b5e881693b5c34e9f0599c5(a);var b=window.setInterval(function(){_0774ff2fd5f24f982f9399723d17b8cabe6aea60a867de00c711504a6b5e881693b5c34e9f0599c5(a);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("global status of last sent message for msgid "+
a+" is: "+status_of_just_sent_message);52==status_of_just_sent_message&&(b=clearInterval(b),document.getElementById("send-status-msgid-"+a).innerHTML+='<B style="color:green">DONE!</B>',document.getElementById("send-in-progress-image-animation-msgid-"+a).style.display="none",document.getElementById("sms-line-item-msgid-"+a).style.backgroundColor="white",_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("status is 52..so..stopping polling"))},500);window.setTimeout(function(){clearInterval(b)},
3E4)},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}function _26d37949e4d8698bf75b1555785ca2eda10105b613316cfd280d6480ca8398013351d9d66d0db62d(){db.transaction(function(a){a.executeSql("DROP TABLE LocalGoogleContacts",[],function(){localContactsArray=[];_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1()},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _78bfd84c1cbfc299485562faa233a17c4dc32aa4d477182ca79676dc1fe4a0e35ff18d63b38b5f9d(){db.transaction(function(a){a.executeSql("DROP TABLE Messages",[],function(){smsarray=[];_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1()},_39ddea6aa3ff0c82f010975424b25bb0b658b83b4ce97040cc6d94438fa8dd736cf752254995ef96)})}
function _c00ce83606da44266efad0b4abf7a97e8481a962c3e27b2e7baee14b3ad1b08e60fc9acb63cb5538(){db.transaction(function(a){a.executeSql("SELECT * FROM LocalGoogleContacts",[],function(a,b){for(var e=0,d=null;e<b.rows.length;e++)d=b.rows.item(e),localContactsArray[e]=d},function(){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("FAILED to select from LocalGoogleContacts -- create this table?")})})}
function _45ee4cb2d4fd8c457c77354e8f3ae59a2a225334033cc53e52ab68451304cb751bc9d476d25989ac(){_gaq.push(["_trackEvent","Popup","Compose-New-Button-Click","",1]);_cbf5231288281d4241e7fee67a522a404548c98180eb7282fa375b94f0e5d2726f61f9d98af0f7a9("resultholder","visible","300px");document.getElementById("results").style.background="none";document.getElementById("results").innerHTML='<div id="compose-single-text" style="clear:both;font-size:18px;margin-left:5px">';document.getElementById("compose-single-text").innerHTML+=
'<a href="#" onclick="location.reload(true);" style="font-size:14px;color:green"><B>\u2190 Back to text messages</a></B><br><br>';contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<p><B>Send To:</B> <span style="font-size:9px;color:blue">&nbsp&nbsp&nbsp(currently can only send to 1 person at a time)</span></p>';document.getElementById("compose-single-text").innerHTML+='<input id="compose-number" type="text" size=50 name="compose-number" style="color:darkgrey; border:1px solid #CCC;-webkit-border-radius:10px;margin:0px;padding:5px;font-family:arial;font-size:14px" value="'+
contact_box_prompt+"\" onblur=\"if (this.value == '')  {this.style.color='darkgrey';this.value = '"+contact_box_prompt+"';}\" onfocus=\"if (this.value == '"+contact_box_prompt+"') {this.style.color='black';this.value = '';}\"/><br><br>";document.getElementById("compose-single-text").innerHTML+='<p><B>Message:</B></p> <textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="height:60px;width:400px;border:1px solid #CCC; -webkit-border-radius:10px; margin:0px;padding:5px;font-family:\'Inconsolata\',arial;font-size:15px"></textarea>';
document.getElementById("compose-single-text").innerHTML+='<button id="send-button-single-text" style="font-family:arial;font-size:12px;mmargin:0px;padding:5px;margin-left:10px;margin-top:-5px;clear:both;" onclick="_0c9c3c0a2416262c779f5ca43a4c648e9ffb579afe814981bd4309e86b27af6c5261574f5b7a0244();"> Send</button>';document.getElementById("compose-single-text").innerHTML+='<span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"> </span>';
document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+='<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#send-one-text").delegate("","keypress",function(a){13==a.keyCode&&(a.preventDefault(),$("#send-one-text").blur(),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("enter triggered"),
_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006()&&(a=$("#send-one-text")[0].value,$("#send-one-text")[0].value=a.replace("\n",""),$("#send-button-single-text").click()),$("#send-one-text").focus())});_21b309e57deed76896054c1c8477b1aa8fb43f6d58fd213b2e7fe3c44772c55aad8f8d42e3dedba3();$("#send-one-text").NobleCount("#charsLeft-one-text");$(function(){$("#compose-number").autocomplete({source:autocomplete_contacts})})}
function _1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages until you sign in **</span>';return!1}
function _e5b8429b107481b36d0463baf17bf340d9e2a258d034fd017ea37d0d4213ba001fc333fc70f1e138(){document.getElementById("user-actions").innerHTML="";0<which_phone_num_from_hash_tag_in_url.length?setTimeout('$("textarea#inputsms-0").focus();',100):google_login_status&&(document.getElementById("user-actions").innerHTML+='<button class="pill positive button" onclick="if(_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006()) {_45ee4cb2d4fd8c457c77354e8f3ae59a2a225334033cc53e52ab68451304cb751bc9d476d25989ac();}"> <span class="pen icon"></span> Compose New</button>',
document.getElementById("user-actions").innerHTML+='<button class="pill button" onclick="document.getElementById(\'msg\').innerHTML =  \'\';_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1();"><span class="reload icon"></span>Refresh</button>')}
function _5df7a7bdd63ae9b34725ca447d65f3922a72ebf567cacd7c03089ab2a6b981de1e955ad6a7c37335(){document.getElementById("results").innerHTML="";document.getElementById("user-actions").innerHTML="";document.getElementById("messages").innerHTML=""}
function _4bf436d53f973e343f22f80a25fef04fcdfeabd4139a4834fbcbc00241f9970f37626cb56af585a4(){null!=window.localStorage&&1==window.localStorage.usingWebAppNew&&($("body").hide(),alert('To set options for MightyText, click "Settings" in the Web application. Redirecting now.'),_93c2c335174bd7a4636f018647b1acf8ff2a279d11f428e2fdc3d968dfdcbf58ee9ca2489a18e4ce());_gaq.push(["_trackEvent","Popup","Options-Page-Load","",1]);_5df7a7bdd63ae9b34725ca447d65f3922a72ebf567cacd7c03089ab2a6b981de1e955ad6a7c37335();
document.getElementById("results").innerHTML="";document.getElementById("results").innerHTML+='<br><div><a href="#" onclick="location.reload(true);" style="font-size:12px;color:green"><br><B>  \u2190 back to text messages</B></a><br><span style="color:maroon;font-size:13px"><B>Please note: The options below are only applicable if you are using the Chrome Extension to send/receive messages.  If you are an early tester on the new MightyText Web App, the options below do not apply.<B></span><br><br></div>';
document.getElementById("results").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Desktop Notification Preference</strong>: When a new text message comes in, what text to show in the desktop notification.<br><br> <input id="notif-level-3" type="radio" name="notif_level" value="3" onclick="_a031ab7cf3062c697cb122f49143b6370e8f4dc3f2f3035aa9496b52b741bf16a40afbbcd7d0837d(this)" >Sender Name and Message Text (e.g. "<B>Bill Jones:</B>  Running 15 minutes late. Do you want me to pick up dinner?") - <B>default</B> <br> <input id="notif-level-2" type="radio" name="notif_level" value="2" onclick="_a031ab7cf3062c697cb122f49143b6370e8f4dc3f2f3035aa9496b52b741bf16a40afbbcd7d0837d(this)">Just Sender Name (e.g. "New text from Bill Jones. <B><U>see it</U></B>")</div>';
$("input[id=\"notif-level-' + window.localStorage.notifLevel + '\"]").attr("checked",!0);document.getElementById("results").innerHTML+='<div id="debugLevelSelection" class="options-section"><strong>Debug Level</strong><br><br><input id="debug-level-1" type="radio" name="debug_level" value="1" onclick="_22b78f8bfa7e48633185e50e74cde6f81d04dbf3471b561f02812adffaced06731de5141e18c4bd4(this)">Debug info to local console only<br> <input id="debug-level-0" type="radio" name="debug_level" value="0" onclick="_22b78f8bfa7e48633185e50e74cde6f81d04dbf3471b561f02812adffaced06731de5141e18c4bd4(this)">Debugging OFF - <B>default</B></div>';
$("input[id=\"debug-level-' + window.localStorage.debugLevel + '\"]").attr("checked",!0);document.getElementById("results").innerHTML+='<div id="autoCloseWindowOnReplySelection" class="options-section"><strong>Popup Window after Replying</strong><br><br><input id="auto-close-1" type="radio" name="auto_close_window" value="1" onclick="_1610431d484d23b0e49e1eaa036d5d18c025c9067faa30af58512b5ed0e5aa7cf027520c2f3636c1(this)">Automatically close window after sending reply<br> <input id="auto-close-0" type="radio" name="auto_close_window" value="0" onclick="_1610431d484d23b0e49e1eaa036d5d18c025c9067faa30af58512b5ed0e5aa7cf027520c2f3636c1(this)">Leave popup window open after sending reply</div>';
$("input[id=\"auto-close-' + window.localStorage.autoCloseLevel + '\"]").attr("checked",!0);document.getElementById("results").innerHTML+='<div id="adminTools" class="options-section"><strong>Advanced Options: </strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_719065480e5f8fd606557846f557e1372eb7e2db894d0769b566591364920a5bc260b688b6721750()">Send Test SMS to USA #</button>';console.log(signOutUrl);!0==google_login_status?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"chrome.tabs.create({url: '"+signOutUrl+"'})\">Sign Out of MightyText</button>":document.getElementById("adminTools").innerHTML+="<button onclick=\"chrome.tabs.create({url: '"+signInUrl+"'})\">Sign In to MightyText</button>";document.getElementById("adminTools").innerHTML+='<button onclick="_8561a15c432fd3e94c4e6b66d17af1a2a117dba0d1ce44a51fad2e78c05839a4db24247ddac5436d();_8f8b852adda559ff7511c733ad984f7220dec1d4c512371affdf27de97c303b331e92259646f2c5c();_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1();">Create Local Data Stores</button>';
document.getElementById("adminTools").innerHTML+='</b><button onclick="_26d37949e4d8698bf75b1555785ca2eda10105b613316cfd280d6480ca8398013351d9d66d0db62d()">Delete all Local Contacts</button><br>';document.getElementById("adminTools").innerHTML+='</b><button onclick="_78bfd84c1cbfc299485562faa233a17c4dc32aa4d477182ca79676dc1fe4a0e35ff18d63b38b5f9d()">Delete all Local Messages</button>';oauth.hasToken()?(document.getElementById("adminTools").innerHTML+='<button onclick="_6dc1628ad5a5556625697efb35c149e14377b7b9b932db439388357e8a8f6ef9d20cedad7494e489();_b4a3df8bbcac42b62ab5f56de43c69fc522dbc887e3b1e0f406e11c600ced009d8a357fc5aa57da8();">Force Sync w/ Google Contacts</button>',
document.getElementById("adminTools").innerHTML+='<button onclick="_bbf0840f485d7b40f83937a48017da9338e2f4fad79dfd7857cc923493f1d7e34186cf7e04ec9d41();_a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1();">Clear Stored Contacts Token</button>'):document.getElementById("adminTools").innerHTML+='<button onclick="_b4a3df8bbcac42b62ab5f56de43c69fc522dbc887e3b1e0f406e11c600ced009d8a357fc5aa57da8();">Get Google Contacts Token</button>';document.getElementById("results").innerHTML+=
"</div>"}
function _a031ab7cf3062c697cb122f49143b6370e8f4dc3f2f3035aa9496b52b741bf16a40afbbcd7d0837d(a){null==window.localStorage?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";
$("#msg").show()}))}
function _22b78f8bfa7e48633185e50e74cde6f81d04dbf3471b561f02812adffaced06731de5141e18c4bd4(a){null==window.localStorage?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Local storage is required!"):(a=a.value,2==a?window.localStorage.debugLevel=2:1==a?window.localStorage.debugLevel=1:0==a&&(window.localStorage.debugLevel=0),debug_mode=window.localStorage.debugLevel,document.getElementById("msg").innerHTML="Updated Debug Level",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML=
"";$("#msg").show()}))}
function _1610431d484d23b0e49e1eaa036d5d18c025c9067faa30af58512b5ed0e5aa7cf027520c2f3636c1(a){null==window.localStorage?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Local storage is required!"):(a=a.value,1==a?window.localStorage.autoCloseLevel=1:0==a&&(window.localStorage.autoCloseLevel=0),document.getElementById("msg").innerHTML="Updated Window Close Preference",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _2fb3d27cdbd6276a206b44efd93650b9dfa8e3f3129c076b1b22377d422ab090eeb17b40332eb158(a){null==window.localStorage?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _0c9c3c0a2416262c779f5ca43a4c648e9ffb579afe814981bd4309e86b27af6c5261574f5b7a0244(){var a=document.getElementById("compose-number").value;_6cb0b2b3123aa5f845519940b7c85f0e2d68a8c7eae0dcaf43919f35fb4f9ea0a1081fc7441ba08b("send-one-text",a,"single-text")}function _11d288b4cbf7d3e95dfa0faed82f2a0082cd048e37896d08bed9eed7db10b61e401550e58ce3cab2(a,c,b){a=document.getElementById(a);c=document.getElementById(c);a.value.length>b?a.value=a.value.substring(0,b):c.value=b-a.value.length}
function _49ea1f50bfd1f453ae3880b13102d4ee1f57ead800f94deddb6ab4c9a13c428925e6eb70ba73e9de(){console.log("In Traverse");var a=(new Date).getTime();document.getElementById("resultholder").innerHTML=resultdivclean;document.getElementById("messages").innerHTML="";db.transaction(function(c){c.executeSql("SELECT 1",[],function(){for(var b=0;1>b;b++){var c="inputsms-0",d="sendbox-0",h="charsLeft-0",g=0,i="";new Boolean(!1);var k="";_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("sms array length is "+
smsarray.length);for(var b=0,f="initial";b<=smsarray.length&&0!=smsarray.length;b++){if(b==smsarray.length||f!=smsarray[b].right_digits_phone_num){console.log("** At end of thread **");if(0!=b){document.getElementById(d).innerHTML+='<div id="send-action" style="margin-top:10px">';document.getElementById(d).innerHTML+='<textarea id="'+c+'" value="starting val" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-'+d+"').innerHTML='';\" style=\"float:left;height:60px;width:450px;border:1px solid #CCC;-webkit-border-radius:10px;margin:0px;padding:5px;font-family:'Inconsolata',arial;font-size:15px\" ></textarea>";
document.getElementById(d).innerHTML+='<span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none" id="'+h+'"> </span>';document.getElementById(d).innerHTML+='<span style="margin-top:160px">';document.getElementById(d).innerHTML+='<button id="send-button-'+g+'" style="float:left;font-size:15px;margin-left:5px" class="positive pill" onclick="if(_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006()) {_6cb0b2b3123aa5f845519940b7c85f0e2d68a8c7eae0dcaf43919f35fb4f9ea0a1081fc7441ba08b(\''+
c+"','"+j+"','"+d+'\');}"> <span class="mail icon"></span>Send</button>';document.getElementById(d).innerHTML+="</span>";document.getElementById(d).innerHTML+='<button id="delete-all-from-sender" style="float:right;font-size:10px;margin-top:0px;ppadding:10px" class="negative button" onclick="_7010eeb6798c8dc3723fecddae4659492139b0dc486b4322de4515f9af9a18f80a1077e770ddf988(\''+f+'\')"><span class="trash icon"></span> Delete all from this sender</button>';document.getElementById(d).innerHTML+="</div>";
document.getElementById(d).innerHTML+='<div id="enter-help-msg" style="padding:5px;margin:10px;margin-top:6px;text-align:left;font-size:12px;color:green">&nbsp  \u2190 Press Enter to send<br><span style="font-size:10px;color:grey"> &nbsp Will send SMS via your phone to: <B>'+j+"<B></span></div>";document.getElementById(d).innerHTML+='<div id="error-text-content-'+d+'" style="font-weight:bold;color:red;font-size:14px"></div>';$("#"+c).delegate("","keypress",function(a){if(13==a.keyCode&&(a.preventDefault(),
$("#"+a.target.id).blur(),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("enter triggered, and blur attempt"),_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006())){var b=a.target.id,c=$("#"+b)[0].value;$("#"+b)[0].value=c.replace("\n","");b=b.substr(9);$("#send-button-"+b).click()}$("#"+a.target.id).focus()});if(b==smsarray.length){console.log("***** AT LAST MESSAGE IN ARRAY IN TRAVERSE FUNCTION *****");break}g+=1;c="inputsms-"+String(g);
d="sendbox-"+String(g);h="charsLeft-"+String(g)}document.getElementById("results").innerHTML+='<div id="'+d+'" style="margin-top:4px;background-colorrr:white;padding:0px;"></div>';_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("----------------------------------------------------------------------------");f=smsarray[b].right_digits_phone_num;_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("phone # in messages table is: "+f);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Length of this # is: "+
f.length);f=f.replace("+","");7>f.length&&(f=_e5060d2c27c7281e56dbdcf304356f8db9812b78749fa825d1f9d8e78bd2495940f92586c04ef35a(f,7));_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Looking up (last 7 digits of phone num): "+f+" -- in local contacts array -- from msgid: "+smsarray[b].id);var j=0,k=_b466910b68e33c11afa3db9adcafe49faef40b02d1bdeb5e0f97f822a25c14aa56041743ae58b6b9(f);""!=k?(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(f+
" WAS  FOUND in Local Contacts DB"),i=k.contactNameLocalDB+'<span style="padding-left:3px;font-size:9px;text-decoration:none;"> ('+k.contactPhoneNumberLocalDB+")</span>",j=k.contactPhoneNumberLocalDB):(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(f+" WAS NOT FOUND in Local Contacts DB -- so now look at Temp Synced G Contacts (from Background Page)"),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Currently: "+contacts.length+
" contacts in Locally Temp Synced G Contacts OAuth array"),0==contacts.length&&(i=smsarray[b].from_phone_num,j=smsarray[b].from_phone_num,_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("No oAuth G Contacts - Will just display full phone number  in tab: "+smsarray[b].from_phone_num+" to user...")),0<contacts.length&&(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Looking up: "+f+" -- in Locally Temp Synced G Contacts OAuth array"),
j=_0ca5b21d85462c6c6cb59487ed616a007653a9df5681b6a7ffc8ecaced0f9fe420825d4156654da8(f,smsarray[b].from_phone_num),""==j?(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(f+" NOT FOUND in Locally Temp Synced G Contacts OAuth array"),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Will just display phone number (last # in thread): "+smsarray[b].from_phone_num),i=smsarray[b].from_phone_num,j=smsarray[b].from_phone_num):(i=j.contactNamefromGoogleContactsArray+
" ("+j.contactPhoneNumberfromGoogleContactsArray+")r",j=j.contactPhoneNumberfromGoogleContactsArray)));document.getElementById("anchors-for-tabs").innerHTML+='<li><a href="#'+d+'">'+i+"</a></li>";0<which_phone_num_from_hash_tag_in_url.length&&(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("single reply thread -- attempting to hide ul anchors"),$("ul#anchors-for-tabs").hide(),$("ul#anchors-for-tabs").height(1),$("div#top-notif-bar").hide(),$("div#close-window-button-red-x").hide(),
$("div#sendbox-0").css("padding-top","0"),setTimeout("$('div#sendbox-0-texts').css('border-top-left-radius','0px 0px');",10),setTimeout("$('button#delete-all-from-sender').hide();",10),setTimeout("$('button#send-button').text('Send Reply');",10),document.getElementById("results").innerHTML='<div id="single-reply-heading" style="margin-bottom:-10px;font-size:22px;color:white;background-color:#0087D2;margin-left:0px;padding:12px;padding-bottom:20px;margin-top:30px;padding-right:0px;border-top-left-radius:10px;border-top-right-radius:10px;letter-spacing: -0.5px;clear:both"><B>'+
i+"</B></div>"+document.getElementById("results").innerHTML);document.getElementById(d).innerHTML+='<div class="text-message-list" style="height:300px" id="'+d+'-texts"> </div>'}f=smsarray[b].right_digits_phone_num;k="";1==smsarray[b].type&&(k=" sms-reply");b==smsarray.length-1&&(0==smsarray[b].type&&0<which_phone_num_from_hash_tag_in_url.length)&&_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(" msgid for bolding is: "+smsarray[b].msgid);buildTextList='<li id="sms-line-item-msgid-'+
smsarray[b].msgid+'" class="sms-line-item'+k+'">';k="";k=80>smsarray[b].body.length?'style="display:inline;line-height: 35px"':"";buildTextList+='<span id= "sms-body-msgid-'+smsarray[b].msgid+'" class="sms-body" '+k+">"+smsarray[b].body+'</span>  <span class="sms-time">'+_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(smsarray[b].time_client)+"</span>";1==smsarray[b].type&&(51==smsarray[b].status?buildTextList+='<span class="outbound-state-info"> [Computer&nbsp&raquo&nbspYour&nbspPhone] </span>':
52==smsarray[b].status?buildTextList+='<span class="outbound-state-info" style="color:green"> [Full Cycle Complete] </span>':-99==smsarray[b].status?buildTextList+='<span class="outbound-state-info" style="color:maroon"> [Failed Send] </span>':1==smsarray[b].status&&(buildTextList+='<span class="outbound-state-info" style="color:maroon"> [Phone Sent SMS] </span>'));buildTextList+='<span class="message-action-links">';buildTextList+='<img src="red-close-x.png" class="HoverBorder" align=middle height=11 width=11 style="margin-left:3px;margin-bottom:5px" onclick="_2fb0fa072448fc34cd28e42cc9759d99704a01291adf3ff6e7cb682091b86bb7d0ea6010b31b9fdf(\''+
smsarray[b].msgid+"')\"> </span> </li>";document.getElementById(d+"-texts").innerHTML+=buildTextList}console.log("DONE GENERATING HTML!");window.setTimeout("_129d40a54822eb507f5977432f63ff3ba8736be9ce58c22f8ab9fea0d543f60632c6f007cbd8a283()",100);window.setTimeout("_68d314353c2fe556c91a58d7673d318dc97f16bc312cd30ab5cb88e5be1c768be42215c6564d2276();",0);c=(new Date).getTime();_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(a);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(c);
_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Time to Load Tabs: "+(c-a)/1E3);console.log("value of i (counter) got to: "+b+"...sms total based on array was: "+smsarray.length);console.log("number of unique contacts with messages isss: "+g);300<smsarray.length&&_gaq.push(["_trackEvent","Popup","HIGH-NUMBER-Local-Messages-Chrome-DataStore","HIGH-NUM-"+smsarray.length+"-Messages-Across-"+g+"-Contacts---"+google_username_currently_logged_in,smsarray.length]);_gaq.push(["_trackEvent",
"Popup","Count-Recipients-In-Tab-List","",g]);_gaq.push(["_trackEvent","Popup","Count-Local-Messages-Array","",smsarray.length])}_e0fd2aad21d640bea2bf02025acda27d29039d029691fcc65bafdec65bd5ae7d76c8bf0d8c22c968(g)})})}function _e0fd2aad21d640bea2bf02025acda27d29039d029691fcc65bafdec65bd5ae7d76c8bf0d8c22c968(a){_21b309e57deed76896054c1c8477b1aa8fb43f6d58fd213b2e7fe3c44772c55aad8f8d42e3dedba3();for(var c=0,c=0;c<=a;c++)$("#inputsms-"+c).NobleCount("#charsLeft-"+c),$("#charsLeft-"+c).html("160")}
function _21b309e57deed76896054c1c8477b1aa8fb43f6d58fd213b2e7fe3c44772c55aad8f8d42e3dedba3(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:function(a,c,b,e){a=c.selector;320==e?$(a)[0].innerHTML=160:$(a)[0].innerHTML=e%160;0>=e?c.css("color","red"):c.css("color","#3F8CD9");0<Math.floor((320-e)/161)&&($(a)[0].innerHTML=$(a)[0].innerHTML+' <span style="font-size:12px;color:green;font-weight:normal">[#2]</span>')},max_chars:320,block_negative:!0,cloak:!1,in_dom:!1}}
function _a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(a){var c="",b=new Date(a),a=b.getHours(),c=12>a?"AM":"PM";0==a&&(a=12);12<a&&(a-=12);var e=b.getMinutes();10>e&&(e="0"+e);var d=b.getDate(),h=b.getMonth();h++;b=b.getFullYear().toString().slice(2);return h+"/"+d+"/"+b+" "+a+":"+e+" "+c}
function _4eededfa984c507fee168ab12804983d32ec63f460e0f471d4c2fdde8724c32684d5aead0d647371(){chrome.extension.sendRequest({purpose:"get_new_g_contacts_token_call_from_popup"},function(a){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Checking Background Page for Google Contacts token...");_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("new response from BG page is "+a.myreply)})}
function _395d827bd89d4e8f7c3eb37121cacc0f1132531ba699348432ae30761b6892a03041b814831abb2d(){chrome.extension.sendRequest({purpose:"set_quick_polling_outbound_message"},function(a){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Checking Background Page to set quick polling because outbound message is being sent...");_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("new response from BG page is "+a.myreply)})}
function _254b536df1f8d5023e6547e90ddc4441186dde53eb248c06d3189c81d5613f272576615020d4bd03(){console.log("in getFreshLatestGoogle function");chrome.extension.sendRequest({purpose:"user_invoked_popup_so_force_google_login_check"},function(a){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Popup Starting -- call BG page to get latest Google Login Info in BG scope");_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("response from BG page is "+
a.reply)})}
function _e5ec7f980c01d8fa2fd92d0138458de9c95be4c949b506bf4ef2d9924df02549d5720823441daa5e(){_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("In CheckBGPageforGoogleLoginState function");chrome.extension.sendRequest({purpose:"popup_checking_current_google_login_state"},function(a){console.log("Checking Background Page for current Google Login important info...(BG page is polling for it)");console.log("response from BG page...login_status is: "+a.google_login_status_from_bg_page);console.log("response from BG page...login_and_beta_ready is: "+
a.login_and_beta_ready_from_bg_page);console.log("response from BG page...google_username_currently_logged_in is: "+a.google_username_currently_logged_in_from_bg_page);console.log("response from BG page...extra_login_status_info is: "+a.extra_login_status_info_from_bg_page);google_login_status=a.google_login_status_from_bg_page;login_and_beta_ready=a.login_and_beta_ready_from_bg_page;google_username_currently_logged_in=a.google_username_currently_logged_in_from_bg_page;extra_login_status_info=a.extra_login_status_info_from_bg_page;
console.log("google login status is : "+google_login_status);console.log("extra login status is : "+extra_login_status_info);google_login_status?"WEBAPP_BETA"==extra_login_status_info?(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("User is a WEBAPP BETA user"),_93c2c335174bd7a4636f018647b1acf8ff2a279d11f428e2fdc3d968dfdcbf58ee9ca2489a18e4ce(),console.log("aaaa"),window.close(),a='<img align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:13px"><B>Hi - You\'ve signed up to use the new MightyText Web App.</span> <a href="#" onclick="window.close();chrome.tabs.create({url: \''+
signOutUrl+"'})\"> Log out of MightyText</a>",document.getElementById("top-notif-bar").innerHTML=a):"USER_REG_BUT_NO_ACTIVE_ANDROID_REG"==extra_login_status_info?(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("This user does not have an active Android App registration! (either never set up or they disconnected..)"),a='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:13px"><B>Android App Not Installed:</B> Please make sure you have installed the MightyText Android app from Google Play &amp configure it using this same Google account.</span> <a href="#" onclick="window.close();chrome.tabs.create({url: \''+
signOutUrl+"'})\"> Log out of MightyText</a>",document.getElementById("top-notif-bar").innerHTML=a):(_0f2a6a242ab30ab1350969fd234bc47a81eb0788befe497a740c8f4aabb635c06f07549336d5360d(),$("#static-links-plus-separator").empty(),$("#sign-in-status").empty(),$("#top-notif-bar").empty(),a="13px",35<google_username_currently_logged_in.length?a="9px":25<google_username_currently_logged_in.length&&(a="11px"),document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;font-size:'+
a+';font-weight:600"> '+google_username_currently_logged_in+" |</span>",$("#sign-in-status").removeClass(),document.getElementById("static-links-plus-separator").innerHTML+='<a id="rate-review" style="color:gold;font-size:13px" href="#" onclick="window.close();chrome.tabs.create({url: \'https://market.android.com/details?id=com.texty.sms&reviewId=123\'});">Rate us</a>|',document.getElementById("static-links-plus-separator").innerHTML+='<a id="texty-on-facebook" href="#" onclick="window.close();chrome.tabs.create({url: \'http://www.facebook.com/mightytext\'});">fb</a>|',
document.getElementById("static-links-plus-separator").innerHTML+='<a id="admin" onclick="_4bf436d53f973e343f22f80a25fef04fcdfeabd4139a4834fbcbc00241f9970f37626cb56af585a4();" href="#" >Options</a>|',$("#static-links-plus-separator").removeClass(),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Logged in fine, so show the google username and Options link..."),_e5b8429b107481b36d0463baf17bf340d9e2a258d034fd017ea37d0d4213ba001fc333fc70f1e138(),window.setTimeout(function(){document.getElementById("dynamic-message").innerHTML=
dynamic_info_global},1500)):(1==window.localStorage.usingWebAppNew&&(_93c2c335174bd7a4636f018647b1acf8ff2a279d11f428e2fdc3d968dfdcbf58ee9ca2489a18e4ce(),window.close()),a='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:red"> Not Signed in.</span>  <a href="#" onclick="window.close();chrome.tabs.create({url: \''+signInUrl+"'})\"> Sign-in using your Google Account</a> to use MightyText",document.getElementById("top-notif-bar").innerHTML=a+"<br>"+document.getElementById("top-notif-bar").innerHTML,
console.log(signInUrl))})}function _6d7aff1c82a744b5154549abc3a778556f1c69bd34e6f66188b004a78e6de7a7614eefb731c306b5(a){for(var c="";-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");-1==a.search("[+]")&&(c="1"==a.charAt(0)?"+":"+1");return c+a}
function _6c72845de64e2269b7f49a1c169e7bf380ee6bc4e36f3cea1a7ee4247c3c534d65b02e79e5485683(a){console.log("phone num to check is: "+a);0==a.search("[+1]")&&(a=a.substring(2));console.log("after substring - phonenum override is: "+a);return a}function _be8ee0f637d29931cfeeee1cb1361eb70f710263a3cd9fb982c5341aec7e54a91daee19403071679(){_be8ee0f637d29931cfeeee1cb1361eb70f710263a3cd9fb982c5341aec7e54a91daee19403071679GoogleOpenID();window.close()}
function _68d314353c2fe556c91a58d7673d318dc97f16bc312cd30ab5cb88e5be1c768be42215c6564d2276(){console.log("in UI_REFRESH_MAGIC");$(function(){0>=selected_tab&&(selected_tab=0,$("#sendbox-0-texts").scrollTop(4E4+$("#sendbox-0-texts").height()));$("#results").tabs();$("#results").show();$("#results").tabs("select",selected_tab);var a="#sendbox-"+selected_tab+"-texts";$(a).scrollTop(4E4+$(a).height());$("#results").bind("tabsshow",function(a,b){var e="#"+b.panel.id+"-texts";$(e).scrollTop(4E4+$(e).height());
$("#inputsms-"+b.index).focus();_gaq.push(["_trackEvent","Popup","Thread-Tab-Click","",1])})});$("#inputsms-"+selected_tab).focus();0<which_phone_num_from_hash_tag_in_url.length&&setTimeout('$("textarea#inputsms-0").focus();',100);$("#refresh-indicator").hide()}
function REFACTOR__49ea1f50bfd1f453ae3880b13102d4ee1f57ead800f94deddb6ab4c9a13c428925e6eb70ba73e9de(){var a=(new Date).getTime();document.getElementById("resultholder").innerHTML=resultdivclean;document.getElementById("messages").innerHTML="";db.transaction(function(c){c.executeSql("SELECT 1",[],function(){for(var b=0;1>b;b++){var c="inputsms-0",d="sendbox-0",h="libox-0",g="charsLeft-0",i=0,k="";_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("sms array length is "+
smsarray.length);for(var b=0,f="initial";b<=smsarray.length&&0!=smsarray.length;b++){if(b==smsarray.length||f!=smsarray[b].right_digits_phone_num){if(0!=b){document.getElementById(d).innerHTML+='<div id="send-action" style="margin-top:10px">';document.getElementById(d).innerHTML+='<textarea id="'+c+'" value="starting val" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-'+d+"').innerHTML='';\" style=\"float:left;height:60px;width:450px;border:1px solid #CCC;-webkit-border-radius:10px;margin:0px;padding:5px;font-family:'Inconsolata',arial;font-size:15px\" ></textarea>";
document.getElementById(d).innerHTML+='<span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none" id="'+g+'"> </span>';document.getElementById(d).innerHTML+='<span style="margin-top:160px">';document.getElementById(d).innerHTML+='<button id="send-button-'+i+'" style="float:left;font-family:arial;font-size:12px;margin-left:10px" class="positive button" onclick="if(_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006()) {_6cb0b2b3123aa5f845519940b7c85f0e2d68a8c7eae0dcaf43919f35fb4f9ea0a1081fc7441ba08b(\''+
c+"','"+j+"','"+d+'\');}"><span class="mail  icon"></span> Send</button>';document.getElementById(d).innerHTML+="</span>";document.getElementById(d).innerHTML+='<button id="delete-all-from-sender" style="float:right;font-family:arial;font-size:12px;margin:10px;margin-top:0px;padding:5px" class="negative button" onclick="_7010eeb6798c8dc3723fecddae4659492139b0dc486b4322de4515f9af9a18f80a1077e770ddf988(\''+f+'\')"><span class="trash icon"></span> Delete all from this sender</button>';document.getElementById(d).innerHTML+=
"</div>";document.getElementById(d).innerHTML+='<div id="enter-help-msg" style="paddinggg:5px;margin:10px;margin-top:10px;text-align:left;font-size:12px;color:green">&nbsp&nbsp\u2190 Press Enter to send<br><span style="font-size:10px;color:grey"> &nbsp Will send SMS via your phone to: <B>'+j+"<B></span></div>";document.getElementById(d).innerHTML+='<div id="error-text-content-'+d+'" style="font-weight:bold;color:red;font-size:14px"></div>';$("#"+c).delegate("","keypress",function(a){if(13==a.keyCode&&
(a.preventDefault(),$("#"+a.target.id).blur(),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("enter triggered, and blur attempt"),_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006())){var b=a.target.id,c=$("#"+b)[0].value;$("#"+b)[0].value=c.replace("\n","");b=b.substr(9);$("#send-button-"+b).click()}$("#"+a.target.id).focus()});if(b==smsarray.length)break;i+=1;c="inputsms-"+String(i);d="sendbox-"+String(i);h="libox-"+String(i);g=
"charsLeft-"+String(i)}document.getElementById("results").innerHTML+='<div id="'+d+'" style="margin-top:10px;bbbackground-color:white;padding:0px;"></div>';_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("--------------------------------------------------------------------------------------------------");f=smsarray[b].right_digits_phone_num;_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("phone # in messages table is: "+f);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Length of this # is: "+
f.length);f=f.replace("+","");7>f.length&&(f=_e5060d2c27c7281e56dbdcf304356f8db9812b78749fa825d1f9d8e78bd2495940f92586c04ef35a(f,7));_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Looking up (last 7 digits of phone num): "+f+" -- in local contacts array -- from msgid: "+smsarray[b].id);var j=0,l=_b466910b68e33c11afa3db9adcafe49faef40b02d1bdeb5e0f97f822a25c14aa56041743ae58b6b9(f);""!=l?(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(f+
" WAS  FOUND in Local Contacts DB"),k=l.contactNameLocalDB+'<span style="padding-left:3px;font-size:9px;text-decoration:none;"> ('+l.contactPhoneNumberLocalDB+")</span>",j=l.contactPhoneNumberLocalDB):(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(f+" WAS NOT FOUND in Local Contacts DB -- so now look at Temp Synced G Contacts (from Background Page)"),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Currently: "+contacts.length+
" contacts in Locally Temp Synced G Contacts OAuth array"),0==contacts.length&&(k=smsarray[b].from_phone_num,j=smsarray[b].from_phone_num,_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("No oAuth G Contacts - Will just display full phone number  in tab: "+smsarray[b].from_phone_num+" to user...")),0<contacts.length&&(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Looking up: "+f+" -- in Locally Temp Synced G Contacts OAuth array"),
j=_0ca5b21d85462c6c6cb59487ed616a007653a9df5681b6a7ffc8ecaced0f9fe420825d4156654da8(f,smsarray[b].from_phone_num),""==j?(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02(f+" NOT FOUND in Locally Temp Synced G Contacts OAuth array"),_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Will just display phone number (last # in thread): "+smsarray[b].from_phone_num),k=smsarray[b].from_phone_num,j=smsarray[b].from_phone_num):(k=j.contactNamefromGoogleContactsArray+
" ("+j.contactPhoneNumberfromGoogleContactsArray+")",j=j.contactPhoneNumberfromGoogleContactsArray)));document.getElementById("anchors-for-tabs").innerHTML+='<li title="'+j+'" id="'+h+'"><a href="#'+d+'">'+k+"</a></li>";0<which_phone_num_from_hash_tag_in_url.length&&(_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("single reply thread -- attempting to hide ul anchors"),$("ul#anchors-for-tabs").hide(),$("ul#anchors-for-tabs").height(1),$("div#top-notif-bar").hide(),
$("#action-info-bar").hide(),$("div#close-window-button-red-x").hide(),$("div#sendbox-0").css("padding-top","0"),setTimeout("$('div#sendbox-0-texts').css('border-top-left-radius','0px 0px');",10),setTimeout("$('button#delete-all-from-sender').hide();",10),setTimeout("$('button#send-button').text('Send Reply');",10),document.getElementById("results").innerHTML='<a style="float:left;clear:both;font-size:12px" href="'+chrome.extension.getURL("popup.html")+'">\u2190 See all message threads</a><br><br><div id="single-reply-heading" style="margin-bottom:-10px;font-size:16px;text-align:left;color:white;background-color:#0087D2;margin-left:0px;padding:8px;padding-right:0px;margin-top:30px;border-top-left-radius:10px;border-top-right-radius:10px;letter-spacing: -0.5px;"><B>'+
k+"</B></div>"+document.getElementById("results").innerHTML);document.getElementById(d).innerHTML+='<div class="text-message-list" style="height:300px" id="'+d+'-texts"> </div>'}f=smsarray[b].right_digits_phone_num;console.log("** Message Line item **")}c=((new Date).getTime()-a)/1E3;console.log("Time to Generate HTML: "+c);window.setTimeout(function(){_129d40a54822eb507f5977432f63ff3ba8736be9ce58c22f8ab9fea0d543f60632c6f007cbd8a283()},100);REFACTOR__68d314353c2fe556c91a58d7673d318dc97f16bc312cd30ab5cb88e5be1c768be42215c6564d2276();
300<smsarray.length&&_gaq.push(["_trackEvent","Popup","HIGH-NUMBER-Local-Messages-Chrome-DataStore","HIGH-NUM-"+smsarray.length+"-Messages-Across-"+i+"-Contacts---"+google_username_currently_logged_in,smsarray.length]);_gaq.push(["_trackEvent","Popup","Count-Recipients-In-Tab-List","",i+1]);_gaq.push(["_trackEvent","Popup","Count-Local-Messages-Array","",smsarray.length]);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("value of i (counter) got to: "+b+"...sms total based on array was: "+
smsarray.length);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("number of unique threads with messages is: "+i+1)}_e0fd2aad21d640bea2bf02025acda27d29039d029691fcc65bafdec65bd5ae7d76c8bf0d8c22c968(i)})})}
function REFACTOR__68d314353c2fe556c91a58d7673d318dc97f16bc312cd30ab5cb88e5be1c768be42215c6564d2276(){console.log("in REFACTOR - UI_REFRESH_MAGIC");$(function(){console.log("selected tab variable stored in page memory\t: "+selected_tab);0>=selected_tab&&(selected_tab=0,$("#sendbox-0-texts").scrollTop(4E4+$("#sendbox-0-texts").height()));$("#results").tabs();$("#results").tabs("select",selected_tab);console.log("1111");_76099ef5e39c3c6d73d3b7b9f95ffe35e7fdebf50d87fbcb22b5f8b076a822ce143e0d0be02892d9(selected_tab);
console.log("222");$("#results").show();console.log("333");var a="#sendbox-"+selected_tab+"-texts";console.log("444");$(a).scrollTop(4E4+$(a).height());$("#results").bind("tabsselect",function(a,c){var d="#inputsms-"+c.index;console.log("Clicked Tab ui index is: "+c.index);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Clicked Tab Phone Number is: "+c.tab.parentNode.title);_76099ef5e39c3c6d73d3b7b9f95ffe35e7fdebf50d87fbcb22b5f8b076a822ce143e0d0be02892d9(c.index);
$(d).focus();console.log(a);console.log(c);console.log($(c.panel).children("textarea").focus());_gaq.push(["_trackEvent","Popup","Thread-Tab-Click","",1])})});var a="#inputsms-"+selected_tab;$(a).focus();console.log("555");console.log(a);0<which_phone_num_from_hash_tag_in_url.length&&setTimeout('$("textarea#inputsms-0").focus();',100);$("#refresh-indicator").hide()}
function _76099ef5e39c3c6d73d3b7b9f95ffe35e7fdebf50d87fbcb22b5f8b076a822ce143e0d0be02892d9(a){var c=[],b="",e="sendbox-"+a+"-texts";select_sql_string="SELECT *,substr(replace(replace(from_phone_num,' ',''),'-',''),-7) AS right_digits_phone_num FROM Messages WHERE right_digits_phone_num=substr(replace(replace('"+$("#libox-"+a).attr("title")+"',' ',''),'-',''),-7) ORDER BY right_digits_phone_num,time_client";console.log(select_sql_string);db.transaction(function(d){d.executeSql(select_sql_string,[],
function(d,g){for(var i=0,k=null;i<g.rows.length;i++)console.log("in loop - getmessagesarraydataforonenumber"),k=g.rows.item(i),c[i]=k;console.log("array length of one number array is "+c.length);b=_477f99280e027cefbcc12b059cc1a88fa12e3f8edb4c68b0326a84a0c5e48a1588b7af851badd4b8(c,e,a)});console.log("success! -- in getmessagesarraydataforonenumber")});console.log("Returned value of HTML from function is, and should be:"+b);console.log(b)}
function _477f99280e027cefbcc12b059cc1a88fa12e3f8edb4c68b0326a84a0c5e48a1588b7af851badd4b8(a,c,b){var e=document.getElementById(c).innerHTML="";console.log("now generate HTML");console.log("array length passed in is: "+a.length);for(var d=0;d<a.length&&0!=a.length;d++){console.log("generating html");var h="";1==a[d].type&&(h=" sms-reply");e+='<li id="sms-line-item-msgid-'+a[d].msgid+'" class="sms-line-item'+h+'">';h="";h=80>a[d].body.length?'style="display:inline;line-height: 35px"':"";e+='<span id= "sms-body-msgid-'+
a[d].msgid+'" class="sms-body" '+h+">"+_d9683102d1147e6478281ea75b3fad55442b6c783223d8e2664545fc5ddcaebf7d9b96bccdcf929f(a[d].body)+'</span>  <span class="sms-time">'+_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(a[d].time_client)+"</span>";1==a[d].type&&(51==a[d].status?e+='<span class="outbound-state-info"> [Computer&nbsp&raquo&nbspYour&nbspPhone] </span>':52==a[d].status?e+='<span class="outbound-state-info" style="color:green"> [Full Cycle Complete] </span>':
-99==a[d].status?e+='<span class="outbound-state-info" style="color:maroon"> [Failed Send] </span>':1==a[d].status&&(e+='<span class="outbound-state-info" style="color:maroon"> [Phone Sent SMS] </span>'));e+='<span class="message-action-links">';e+='<img src="red-close-x.png" class="HoverBorder" align=middle height=11 width=11 style="margin-left:3px;margin-bottom:5px" onclick="_2fb0fa072448fc34cd28e42cc9759d99704a01291adf3ff6e7cb682091b86bb7d0ea6010b31b9fdf(\''+a[d].msgid+"')\"> </span> </li>"}console.log("we plan to populate this DOM with these threads for a single phone number: "+
c);a="#"+c;document.getElementById(c).style.display="none";document.getElementById(c).innerHTML+=e;$(a).fadeIn(200,function(){});console.log("here");$("#"+c).scrollTop(14E4);console.log("here2");$("#inputsms-"+b).focus();console.log("here3")}console.log(222);