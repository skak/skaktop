var isCorsSupported=_69d99d987b4a138926f4fc52510c26138d26ec68329bccc75b40306e1ada36378bd690c9000f9c6c(),baseUrl="https://textyserver.appspot.com",contactsOAuthClientID="82288362851-h3jq02v23ctb7012e8bher02un8fk6n2.apps.googleusercontent.com",dest_num="";
-1<location.hash.search("0-35")?(baseUrl="https://0-35.textyserver.appspot.com",contactsOAuthClientID="82288362851-5030tstki1f1nain3ras3lbnhvafa7n3.apps.googleusercontent.com",alert("overriding URL to: "+baseUrl)):-1<location.hash.search("0-")&&(baseUrl="https://1-dot-"+location.hash.substr(1)+"-dot-textyserver.appspot.com",contactsOAuthClientID="82288362851-5030tstki1f1nain3ras3lbnhvafa7n3.apps.googleusercontent.com",$("#debug-environment-text").text("DEV"),alert("overriding URL to: "+baseUrl));
var signInUrl=baseUrl+"/signin?continue_web= "+location.href,signOutUrl=baseUrl+"/signout?continue_web= "+location.href,newContactsOAuthURL="https://accounts.google.com/o/oauth2/auth?client_id="+contactsOAuthClientID+"&redirect_uri="+baseUrl+"/contacts-sync&scope=https://www.google.com/m8/feeds/&response_type=code&access_type=offline&approval_prompt=force",global_oauth_contacts_token="gcontacts_token_placeholder",globalContactsRefreshCacheQueue=[],globalQueueContactImagesToFetch=[],globalPHONEContactsRefreshCacheQueue=
[],contactsFromPhoneGlobal=[],global_time_last_CAPI_msg_received_webapp=new Date-6E5,current_server_stored_google_contacts_token=void 0,alertFallback=!1;if("undefined"===typeof console||"undefined"===typeof console.log)console={},console.log=alertFallback?function(a){alert(a)}:function(){};var googleContactsArray=null,searchAutocompleteArray=null,newBestGoogleContactsArray=null,newBestGoogleContactsArray=[],inWebAppGlobalNotifArray=[];
function _db080fbf45a01847b37f2ac7f9c70f9b06c7414aac4cec889caaf1e817a64497e238111daf4cd15d(){var a=inWebAppGlobalNotifArray.shift(this);console.log("---");console.log(a);a.cancel()}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();
function _d827349b7002d838849c2aaebbbbf93d0792db9c782f07c0fc57eba8c9903cabab195212f6bb79d4(a){var b=window.location.pathname;-1<b.search("dev")||-1<b.search("IEEEE-DEV")?(b="",-1<location.hash.search("0-")&&(b=" ("+location.hash.substr(1)+")"),_77ea4dbb43f802c2ca5b52d1c33cfb57cdf7d5806341e003520bc779c996d2490305a597ff45a8ae(a),$("#debug-environment-text").show().text("DEV"+b),$("#top-header").css("background","#2d3038")):-1<b.search("staging")&&(_77ea4dbb43f802c2ca5b52d1c33cfb57cdf7d5806341e003520bc779c996d2490305a597ff45a8ae(a),
$("#debug-environment-text").show().text("STAGING"),$("#top-header").css("background","yellow"))}
function _dde55de6378b886373731cb8f8fd652bcf87f3762ba42d33d370426bc2e7820d69c1beff80166a7b(){if(window.webkitNotifications){var a=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png","Bootup test subject","test content");a.onclick=function(){window.focus();this.cancel()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _9f4127277fc7bdd2b0efa4a89f583bc614218b2ce0eba759a7cc0b453e086baea6aaa813bdd8fb12(){if(window.webkitNotifications){var a=window.webkitNotifications.createHTMLNotification("test-notification.html#1");a.onclick=function(){window.focus()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _c04141c441c0cf4630e1459bf7091f0d21fff8ecb3753bfaff7db56556f5bb9a615abd30fbc67535(){"Firefox"==BrowserDetect.browser&&(window.webkitNotifications?_kmq.push(["record","Firefox Webkit Notif CAPABLE"]):_kmq.push(["record","Firefox Webkit Notif NOT capable"]),0!=window.webkitNotifications.checkPermission()&&$("#request_html_notif_permission").show())}
function _0c9c3c0a2416262c779f5ca43a4c648e9ffb579afe814981bd4309e86b27af6c5261574f5b7a0244(){1>$("#send-one-text").val().length?alert("Error: Message is blank"):_7a07368ebb36fb75bb76938ccf26794540bab65c1c2bd95f16f5816d88200711d634dff3d5bfd152()}
function _cabc95525e0e1562d71d180111719e005b93ec830bb3bf0f33a4e8071a265d726a4f202cc0eb4fd4(a,b,c){var d=baseUrl+"/content?function=deleteMessagesByMsgID",d=d+("&id="+encodeURIComponent(a));console.log(d);var e="#sms-line-item-msgid-"+a;$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"deleteOneMsg",success:function(a){console.log(a);console.log(a.num_deleted);if(1!=a.num_deleted)alert("Error - Message not Deleted. Please report to MightyText team (Error Code: DT56)");else if($(e).fadeOut(400,
function(){$(this).remove();document.getElementById("msg").innerHTML="Deleted Message";_gaq.push(["_trackEvent","WebApp","Delete-Message-Single","",1])}),10==c||11==c)a="#thread-count-live-updated-"+b,1==parseInt($(a).text())?_4be027f2de2f9e2980f05973d20e084f5f678e7d2fb16ae54f4a996c50cbfcde7a297b3bee9ba05e(b):$(a).text(parseInt($(a).text())-1)}})}
function _4be027f2de2f9e2980f05973d20e084f5f678e7d2fb16ae54f4a996c50cbfcde7a297b3bee9ba05e(a){$("#"+a).parent().fadeOut(600,function(){$(this).remove()});_2149aa8a6a988ed81eeba8605a1817e72749d8a9ccf6183e00d58c4c6be393efade4f14424fc445f()}
function _e435f4592c698bb73d2759cf783fc5a5fa1a475d9d331d2474324d2caaae993cde04ec24e9781e7a(a,b){var c=$("ul#tabs-phone-threads li:first");console.log(c);c="#"+a;if(0<$(c).length){console.log("it is an existing thread, now check if that thread is already at top");var d=$(c).parent();console.log(d);$("ul#tabs-phone-threads li:first a").attr("id")!=a?($(c).parent().prependTo("#tabs-phone-threads").hide().slideDown(),$(c).hide().show("highlight",{color:"#F9EEC0"},2E3),setTimeout(_1fb1b85f3494930ecb54a06b1e34a1120de44201183723726a927563ad46963f2138cc147d04cea0,
200)):console.log("thread is already at the top -- don't move thread/tabs at all")}else _775a1846db8afcf2106b4c17f3e17df219cf49d06fa4600d192f3a75d3730a74fb332a3ec65ee576(a,b)}
function _775a1846db8afcf2106b4c17f3e17df219cf49d06fa4600d192f3a75d3730a74fb332a3ec65ee576(a,b){var c="",d="img/silhouette.jpg",e=!1;global_oauth_contacts_token&&(e=!0);console.log("phone_num_clean, right before jstorage get call is: "+a);var g=[];0!=a&&(g=$.jStorage.get(a,"no-jstorage-val-found"));g.name?(c=g.name,console.log(a+" - Local Storage contact match to name: "+c),""!=g.thumbnail_image_google_base_url&&(d=g.thumbnail_image_google_base_url+"&oauth_token="+global_oauth_contacts_token),g=_4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746()-
g.time_stored,21600<g&&e&&(console.log("should refresh local contact cache for "+a+" -- seconds old: "+g),globalContactsRefreshCacheQueue.unshift(a),setTimeout(_01c7acac3c0bf02525fc2b799dcdddf80f5763c80fc4bc36e11af3aa4b787fcecaf52ae8ab651208,100))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call _9668971f14388f501d7f7a99786d258a4cb9150c1409f59a4361208f27b50c7e9a4206cf3388fc89"),c=b,e&&(globalContactsRefreshCacheQueue.unshift(a),setTimeout(_01c7acac3c0bf02525fc2b799dcdddf80f5763c80fc4bc36e11af3aa4b787fcecaf52ae8ab651208,
100)));c='<li id="tabNEW-'+a+'" class="ui-state-default ui-corner-top">'+('<a title="'+b+'" id="'+a+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+a+'" class="threadnamenumber">'+c+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+a+'">1</span>)<br> <span id="timestamp-last-msg">'+_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(new Date,!1)+"</span></span></span>");
c+='<img id="thumbnail-if-known-'+a+'" class="g-thumb-image-load-now" style="margin-right:0px;float:right" width=45 height=45 src="'+d+'"> </a></li>';setTimeout(_1fb1b85f3494930ecb54a06b1e34a1120de44201183723726a927563ad46963f2138cc147d04cea0,200);$(c).prependTo("#tabs-phone-threads").hide().slideDown()}
function _1fb1b85f3494930ecb54a06b1e34a1120de44201183723726a927563ad46963f2138cc147d04cea0(){$("#resultholder").tabs({add:function(a){console.log(a)}});$("#tabs-phone-threads").scrollTo("0%",400)}
function _301a41396911273dc800e10ae9bb724f73e4e6898d396f9047754b91e68d992920b521280cd9d351(a){var b=baseUrl+"/content?function=deleteMessagesByPhoneNum",b=b+("&phone_num_clean="+encodeURIComponent(a));console.log(b);$.ajax({url:b,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"deleteByThreadCallback",success:function(b){0<b.num_deleted?(document.getElementById("msg").innerHTML="Deleted Thread. Number of messages deleted: "+b.num_deleted,_gaq.push(["_trackEvent","WebApp","Delete-Entire-Thread",
"WebAppPageView",b.num_deleted]),_4be027f2de2f9e2980f05973d20e084f5f678e7d2fb16ae54f4a996c50cbfcde7a297b3bee9ba05e(a)):alert("Error - Message Thread Not Deleted. Please try again. If it continues, please report to MightyText team (Error Code: TRDLT79)")}})}
function _2149aa8a6a988ed81eeba8605a1817e72749d8a9ccf6183e00d58c4c6be393efade4f14424fc445f(){$("#sms-thread-content").empty();$("#thread-heading-name").empty();$("#sendbox-main").val("");$("#charsLeft-main").text("500");$("#thread-heading-actions").hide();$("#inputsms-main").hide();$("#mms-image-preview").hide();$("#mms-image-preview").attr("src","");$("#mms-blob-id-holder").text("")}
function _70cecb1b584ba27ace91a2d7c4006f94176db3a96002a7b842c383b9589c5e3167645509c58e0877(a){var b="",b=$("#compose-single-text")[0]?"#send-one-text":"#sendbox-main";if(0<$(b).val().length){if(1==a)return!0;if(!confirm("You've typed text that you haven't sent. Are you sure you want to leave this page before sending this message?"))return $(b).focus(),!0}return!1}
function _f30d16a159bcb12044e4dcde67e2ed99966cc5f7d8824c7ace333d0542623a76ab50784a989e5598(a,b){console.log("Generating Tabs...");$(function(){$("#resultholder").tabs({selected:a,ajaxOptions:{error:function(a,b,e,g){$(g.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});console.log("JUST SET UP TABS");b||setTimeout("_76f33a967c3e5b6a02d657477451a1fec5acc0718ed10396f6a72b7016efdadf4e47eab864a348b4();",2500);setTimeout("getAllMessagesForSearch();",1E3);setTimeout("_b1c3b366040b577d80998f53f04b5984485356620d89e18e802e9054907596bf2c5a60db164d9a84();",
2E3);dynamic_content_load()});$("#resultholder").bind("tabsselect",function(a,b){var e=b.index+1;_gaq.push(["_trackEvent","WebApp","Thread-Tab-Click-Position","tab-click-position-"+e,e]);if(!$("#settingsPane")[0]&&_70cecb1b584ba27ace91a2d7c4006f94176db3a96002a7b842c383b9589c5e3167645509c58e0877())return!1;if($("#compose-single-text")[0]||$("#settingsPane")[0])e=b.index,_7c9a11fdbf06d249536d31c3aa3fa1f16a31fcf1575fdd8f0189dd279570bd6305189862d8bd1dd4(),$("#resultholder").tabs("disable"),$("#resultholder").tabs("destroy"),
$("#resultholder").tabs({selected:e,ajaxOptions:{error:function(a,b,c,d){$(d.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0"}});document.getElementById("msg").innerHTML="";var g=b.tab.title,h=b.tab.id;console.log("TAB SELECT triggered...");var f=$("#name-if-known-"+h).text();_1f8bf1054a2ba888e4fcfea98e7c9e868cf654fbff409765f8bd21e0d8e47cfd7ddc509ccb2d2ffd(h,
"END",f);_2149aa8a6a988ed81eeba8605a1817e72749d8a9ccf6183e00d58c4c6be393efade4f14424fc445f();$("#thread-heading-name").text("");$("#thread-heading-actions").show();$("#inputsms-main").show();document.getElementById("send-button-main").onclick=function(){_gaq.push(["_trackEvent","WebApp","Send-Message-Reply-In-Thread-Click","",1]);var a;a=0==$("#mms-blob-id-holder").text().length;_c51ab999fbe75d79d8c39e7cf9f2a0568bf91c578238e60aca22e26445e49670bf3f82463e7f8a25(a)&&($("#send-button-main").css({background:"lightgrey",
color:"grey"}),$("#send-button-main").html("Sending\u2026"),$("#send-button-main").attr("disabled",!0),a?_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453("send_sms","reply-thread-window",g,h,f,"_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec"):_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453("send_mms","reply-thread-window",g,h,f,"_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec",
-999,$("#mms-blob-id-holder").text()))};document.getElementById("remote-phone-dial").onclick=function(){document.getElementById("remote-phone-dial").innerHTML="Calling from your phone...";_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453("make_automated_call","NA",g,h,f,"_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec")};document.getElementById("delete-all-from-sender").onclick=function(){confirm("Are you sure you want to delete ALL messages for "+
g+"?")&&_301a41396911273dc800e10ae9bb724f73e4e6898d396f9047754b91e68d992920b521280cd9d351(h)};$("#dest-num-reminder").empty();$("#dest-num-reminder").text(g)});console.log("5555");$("#sms-container").unblock();""==location.hash?setTimeout("$('#resultholder').tabs('select' , 0);",100):setTimeout("$(location.hash).click();",100)}
function _719065480e5f8fd606557846f557e1372eb7e2db894d0769b566591364920a5bc260b688b6721750(){!0==confirm("This will send a text message via your phone to a phone # in the USA. Press OK to proceed.")&&_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453("send_sms","test-sms-send","+14158684689","8684689","MightyText Test #","_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec")}
function _d5a88d423383ac85abd17c19c9a8a5edf08b55ff663777faf4b59baabadb8a32e6b26f5a97141bb8(){}
function _a7a8f33ae8677d681a187c048bd64089f6a67f76140c5b200307222070d26992ffa81976bb3c46b0(a,b,c){var d=baseUrl+"/client?function=send&deviceType=ac2dm&action="+a+"&action_data="+b,e="";isCorsSupported||(d="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM",e="&wagdaedunn="+ckSharedGlobal,e+="&action="+a+"&action_data="+b);c&&(d+=c);console.log("send url for Custom C2DM is: "+d);$.ajax({url:d,global:!1,type:"POST",xhrFields:{withCredentials:!0},data:e,dataType:"text",success:function(b){console.log(b);
-1<b.search("sent to phone")?"push_phone_contacts_to_cloud"==a&&alert("Requested to refresh contacts from phone."):alert("C2DM error: "+b)},error:function(a,b,c){alert("Error in C2DM: "+c);alert("Error details: "+c.error)}})}function _4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746(){return Math.round((new Date).getTime()/1E3)}
function _486f102b5bb57c91f1192112d8ec9c2655fdfe3d5151a0deab26bb4b4115c1c7d1668b54bd0d667d(a,b,c){"undefined"===typeof c&&(c=0);console.log("params: "+a+" ---- "+b+" --- "+c);var d=!0;"NO_CONTACTS_TOKEN"==a&&(d=!1);var e=baseUrl+"/api?function=GetDistinctMessageHeaders&CLIENT=CRX";console.log("calling AJAX - getting THREADS");$.ajax({url:e,global:!1,type:"GET",timeout:9E3,dataType:"jsonp",error:function(){1>c?_486f102b5bb57c91f1192112d8ec9c2655fdfe3d5151a0deab26bb4b4115c1c7d1668b54bd0d667d(a,b,c+
1):_81720b4469b12875110e8f90d18ee16e6c0794c0f62b30ace9d03e44b746a44c0aff0ca7740bda77(_4873caf6a405be67fe1097b79000491a0a62667d2b8d5e556f0c79930c3e96823d66ff3dd6a9bc06)},statusCode:{500:function(){alert("Error 500")}},success:function(c){calling_from_chrome_extension||$.unblockUI();"NO_CONTACTS_TOKEN"!=a&&_5748e8895723a0da63d2bc75b935735a9c0d96996899fcbf30b798244d8f59d4c95233c84fcc7f56(a);c.user&&-1<c.user.search("user not logged in")&&(window.location=signInUrl);var e=0,f=0,k=0;$.each(c.messages,
function(b,c){0==c.phone_num_clean&&(c.phone_num="Unknown / Misc");var e="",g="img/silhouette.jpg",h="",n="src",j=8;$.browser.msie&&(j=1);e=!1;"NO_CONTACTS_TOKEN"==a&&(e=!0);if(e)j=$.jStorage.get(username_prefix_jstrg_purpose+"|PC_"+c.phone_num_clean,"no-jstorage-val-found"),"no-jstorage-val-found"==j?(j=_1e186b5c279b3a080f21eccba15779e30b2a21156939b4ae6707698e7207ca8604bf6e468af4841f(c.phone_num_clean),console.log("NO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean+" ... now check array loaded from cloud")):
console.log("MATCHED! LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),void 0==j?(e=c.phone_num,console.log("Phone Contacts NOT MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...NO CONTACT MATCH....for full num: "+c.phone_num)):(e=j.contactName,console.log("Phone Contacts YES MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...Contact Match: "+j.contactName+"..."+j.phoneNum),j=$.jStorage.get(username_prefix_jstrg_purpose+"|PH_PIC_"+c.phone_num_clean,"no-jstorage-val-found"),
"no-jstorage-val-found"==j?(_81279c072aa4e5d10bd61516c8db94263cff21a081fa26e393af3eeefbc8808e8c7fe8f10abc3773(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,99999),console.log("NO PHOTO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean)):(console.log("LOCAL PHOTO JSTORAGE ENTRY MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),console.log("Now check if actual binary image available in JSTORAGE"),2<j.contactThumbnailBinary.length?(console.log("BINARY IMAGE in local cache for "+
c.phone_num_clean),globalPHONEContactsRefreshCacheQueue.push([c.phone_num_clean,"data:image/jpeg;base64,"+j.contactThumbnailBinary])):(console.log("NO actual photo in local cache for: "+c.phone_num_clean),console.log("Now, see if C2DM request for this image was recent"),j.ts_last_c2dm_pic_request&&(j=_4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746()-j.ts_last_c2dm_pic_request,console.log(j+"s since last c2dm try for "+c.phone_num_clean),180>j&&(console.log("checking for image again from central MC"),
_81279c072aa4e5d10bd61516c8db94263cff21a081fa26e393af3eeefbc8808e8c7fe8f10abc3773(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,j))))));else{var q=[];0!=c.phone_num_clean&&(q=$.jStorage.get(c.phone_num_clean,"no-jstorage-val-found"));q.name?(e=q.name,console.log(c.phone_num_clean+" - Local Storage contact match to name: "+e),""!=q.thumbnail_image_google_base_url&&(g=q.thumbnail_image_google_base_url+"&oauth_token="+a,k++,k<j?(h="g-thumb-image-load-now",n="src"):(h="g-thumb-image-load-later",
n="srcloadlater")),j=_4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746()-q.time_stored,21600<j&&d&&(console.log("should refresh local contact cache for "+c.phone_num_clean+" -- seconds old: "+j),globalContactsRefreshCacheQueue.push(c.phone_num_clean))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call globalContactsRefreshCacheQueue for "+c.phone_num+" .... "+c.phone_num_clean),e=c.phone_num,d&&globalContactsRefreshCacheQueue.push(c.phone_num_clean))}calling_from_chrome_extension||
(j='<li id="tab'+b+"-"+c.phone_num_clean+'">',j+='<a title="'+c.phone_num+'" id="'+c.phone_num_clean+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+c.phone_num_clean+'" class="threadnamenumber">'+e+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+c.phone_num_clean+'">'+c.count+'</span>)<br><span id="timestamp-last-msg">'+_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(c.ts_server,
!0)+"</span></span></span>",j+='<img id="thumbnail-if-known-'+c.phone_num_clean+'" class="'+h+'" style="margin-right:0px;float:right" width=45 height=45 '+n+'="'+g+'"> ',document.getElementById("tabs-phone-threads").innerHTML+=j,document.getElementById("tabs-phone-threads").innerHTML+="</a></li>",f+=c.count)});setTimeout(_127869bb72e95fe48326c500ed210a8e9dde7afb84a832206c630e521cbde23a7f109caf928533ff,5E3);_c2c96b426439a31818c5b8d89913335dccbc6cb92365874a01a1c9377ec8a29eb3b231a55d28a4ce();"NO_CONTACTS_TOKEN"!=
a&&(global_oauth_contacts_token=a,setTimeout(_01c7acac3c0bf02525fc2b799dcdddf80f5763c80fc4bc36e11af3aa4b787fcecaf52ae8ab651208,1E3));setTimeout(_96252958097902ba4d14c7a155f293fa2899b5ee58fd213b2e7fe3c44772c55aad8f8d42e3dedba3,2E3);e=c.messages.length;_gaq.push(["_trackEvent","WebApp","Count-Num-Threads-Pulled","",e]);_gaq.push(["_trackEvent","WebApp","Count-Num-Total-Messages-Pulled-All-Threads","",f]);calling_from_chrome_extension||(generate_tabs(-1,b),$("#resultholder").show(),$.unblockUI())}})}
function _127869bb72e95fe48326c500ed210a8e9dde7afb84a832206c630e521cbde23a7f109caf928533ff(){for(var a="";0<globalQueueContactImagesToFetch.length;)a+=globalQueueContactImagesToFetch.shift(),0<globalQueueContactImagesToFetch.length&&(a+="|");0<a.length&&_a7a8f33ae8677d681a187c048bd64089f6a67f76140c5b200307222070d26992ffa81976bb3c46b0("push_phone_contact_photos_to_cloud",a)}
function _01c7acac3c0bf02525fc2b799dcdddf80f5763c80fc4bc36e11af3aa4b787fcecaf52ae8ab651208(){var a=globalContactsRefreshCacheQueue.shift();console.log("SHIFT OFF ARRAY: checking google contacts api for "+a);_9668971f14388f501d7f7a99786d258a4cb9150c1409f59a4361208f27b50c7e9a4206cf3388fc89(a,global_oauth_contacts_token,!0);0<globalContactsRefreshCacheQueue.length&&setTimeout(_01c7acac3c0bf02525fc2b799dcdddf80f5763c80fc4bc36e11af3aa4b787fcecaf52ae8ab651208,300)}
function _c2c96b426439a31818c5b8d89913335dccbc6cb92365874a01a1c9377ec8a29eb3b231a55d28a4ce(){if(1>globalPHONEContactsRefreshCacheQueue.length)return!1;var a=globalPHONEContactsRefreshCacheQueue.shift(),b=a[1];$("#thumbnail-if-known-"+a[0]).attr("src",b);0<globalPHONEContactsRefreshCacheQueue.length&&setTimeout(_c2c96b426439a31818c5b8d89913335dccbc6cb92365874a01a1c9377ec8a29eb3b231a55d28a4ce,100)}
function _81279c072aa4e5d10bd61516c8db94263cff21a081fa26e393af3eeefbc8808e8c7fe8f10abc3773(a,b,c){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContactPhotos&phone_num_clean="+a,global:!1,type:"GET",dataType:"jsonp",jsonpCallback:"servletReturns"+a,success:function(d){if("0"!=d.phone_contact_photo_status&&0<d.phone_contact_photo_status.length)$(b).attr("src","data:image/jpeg;base64,"+d.phone_contact_photo_status),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status});
else if(0==d.phone_contact_photo_status.length){console.log("photo was previously requested and sent as blank to MT system for phone num: "+a);var e;$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status},{TTL:6048E5})}else 28800<c&&5>globalQueueContactImagesToFetch.length&&(globalQueueContactImagesToFetch.unshift(a),e=1728E5,$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status,ts_last_c2dm_pic_request:_4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746()},
{TTL:e}))}})}function _5bece8ddecdb642edb403ed73cfa4acf0c603e41691bd1ac7f7f30420153788b2d1ecfd7dc29f3bd(){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContacts",global:!1,type:"GET",dataType:"jsonp",jsonpCallback:"servletReturns",success:function(a){_d2665455b931bfab1161f24a546140cd705ef4b942d2a6ad49f93ab4b987b1a9e738425aacb8d2af(a)}})}
function _1e186b5c279b3a080f21eccba15779e30b2a21156939b4ae6707698e7207ca8604bf6e468af4841f(a){var b;$.each(contactsFromPhoneGlobal,function(c,d){if(a==d.phoneNumClean)return b=d,$.jStorage.set(username_prefix_jstrg_purpose+"|PC_"+a,{contactName:d.contactName,phoneNum:d.phoneNum,phoneNumType:d.phoneNumType}),!1});return b}
function _d2665455b931bfab1161f24a546140cd705ef4b942d2a6ad49f93ab4b987b1a9e738425aacb8d2af(a){if(0==a.contacts_status)return console.warn("No Phone contacts in cloud for this user"),!1;$.each(a,function(a,c){contactid=c.contactId;contactName=c.displayName;$.each(c.phoneList,function(a,b){phoneNumType=b.type;phoneNum=b.phoneNumber;cleanPhoneNum=_824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(phoneNum);contactsFromPhoneGlobal.push({phoneNum:phoneNum,phoneNumType:phoneNumType,
phoneNumClean:cleanPhoneNum,contactName:contactName})})})}function _96252958097902ba4d14c7a155f293fa2899b5ee58fd213b2e7fe3c44772c55aad8f8d42e3dedba3(){var a=$(".g-thumb-image-load-later").first();a&&(a.attr({src:a.attr("srcloadlater")}),a.removeClass("g-thumb-image-load-later"),a.addClass("g-thumb-image-LOADED-later-DONE"),setTimeout(_96252958097902ba4d14c7a155f293fa2899b5ee58fd213b2e7fe3c44772c55aad8f8d42e3dedba3,300))}
function _21407653fb5e0dccd0f0db39ce608d606700b7876f3a4ae830d368f3ab6bda2bc6a51673c43c8452(){console.log("Forcing  contacts token refresh...");$.ajax({url:baseUrl+"/contact?function=revokeGoogleContactsToken",global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontactsrevoke",error:function(a,b,c){alert("** Error in revoking google contacts token: "+c)},success:function(){$.jStorage.flush();alert("Successfully Unlinked from Google Contacts");window.location.reload()}})}
function _53a1792027e6562f2acb3d82e9b02a9ec2a05bbbc7c1e614af846633b585281af20148f6c686cde7(a){console.log("*** NEW CONTACTS TOKEN REFRESH!");$.ajax({url:baseUrl+"/contact?function=refreshGoogleContactsAccessToken",global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontactsforce",error:function(a,c,d){console.log("** Error in refresh_google_contacts_access_token: "+d);_486f102b5bb57c91f1192112d8ec9c2655fdfe3d5151a0deab26bb4b4115c1c7d1668b54bd0d667d("NO_CONTACTS_TOKEN")},success:function(b){console.log("in force contacts token refresh -- success!");
console.log("get_new_access_token_value is: "+b);calling_from_chrome_extension&&$.jStorage.set("google_contacts_token",{contacts_token_value:b,time_captured:_4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746()});-1<b.search("error")?_486f102b5bb57c91f1192112d8ec9c2655fdfe3d5151a0deab26bb4b4115c1c7d1668b54bd0d667d("NO_CONTACTS_TOKEN",a):_486f102b5bb57c91f1192112d8ec9c2655fdfe3d5151a0deab26bb4b4115c1c7d1668b54bd0d667d(b,a)}})}
function _5748e8895723a0da63d2bc75b935735a9c0d96996899fcbf30b798244d8f59d4c95233c84fcc7f56(a){var b="https://www.google.com/m8/feeds/contacts/default/full?alt=json&v=3.0&max-results=6000&oauth_token="+a;localGoogleContactsFeed="NOTHING-STORED";"NOTHING-STORED"==localGoogleContactsFeed?(console.log("**CONTACTS: No local contacts TOKEN stored; calling google Contacts feed using stored token"),$.ajax({url:b,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts",success:function(b){console.log(b);
_78b9dce890e3ba5e2394a04b85e05346eb81cad972096781f5ce15494a427a06991b00fd2ea374f9(b,a)}})):_78b9dce890e3ba5e2394a04b85e05346eb81cad972096781f5ce15494a427a06991b00fd2ea374f9(localGoogleContactsFeed,a)}
function _9668971f14388f501d7f7a99786d258a4cb9150c1409f59a4361208f27b50c7e9a4206cf3388fc89(a,b,c){console.log("in getSingleNumberContactsFeeeed");if(0==a)return 1;var d="https://www.google.com/m8/feeds/contacts/default/full?q="+a+"&alt=json&v=3.0&max-results=2000&oauth_token="+b;console.log(d);$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts"+a,success:function(d){console.log("In GetSingleNumberContacts Feed. . .");console.log(d);0<d.feed.openSearch$totalResults.$t&&_c77f98c8706784a9846e1f0893bb7f802629b9c5bf1d3bbc7feae12ce25ea0154a45e8bacb43a977(d,
b,a,c)}});return 1}
function _17b1febc286a2efdc3e91289ea75a90ddb8de0007d7dc6ad1d2038fa7966f0a9fed2b438850e5673(a){for(var a=a.feed.entry,b=0;b<a.length;b++){var c=a[b];console.log("name = "+c.getTitle().getText());for(var d=c.getEmailAddresses(),e=0;e<d.length;e++){var g=d[e].getAddress();console.log("email = "+g)}c=c.getPhoneNumbers();if(0==c.length)console.log("phone number = N/A");else for(e=0;e<c.length;e++)d=c[e].getValue()||"N/A",console.log("phone number = "+d)}0==a.length&&console.log("no contacts are found ")}
function _78b9dce890e3ba5e2394a04b85e05346eb81cad972096781f5ce15494a427a06991b00fd2ea374f9(a){contacts_bkg_page=[];contacts_autocomplete_per_unique_phone_num=[];googleContactsArray=[];for(var b="",c=0,d;d=a.feed.entry[c];c++){var e={name:d.title.$t,id:d.id.$t,emails:[],phonenums:[]};e.name||(e.name=e.emails[0]||"<Unknown>");if(d.link&&d.gd$phoneNumber)for(var g=d.link,h=0,f;h<g.length;h++)f=g[h],"image/*"==f.type&&void 0!=f.gd$etag&&(b=f.href);if(d.gd$phoneNumber){g=d.gd$phoneNumber;for(h=0;h<g.length;h++){f=
g[h];e.phonenums.push(f.$t);googleContactsArray.push({name:e.name,phone_number_full:f.$t,thumbnail:b});var k=f.rel,m="";void 0===k?m="Other":0<k.search("mobile")?m="Mobile":0<k.search("work")?m="Work":0<k.search("home")&&(m="Home");contacts_autocomplete_per_unique_phone_num.push({label:e.name+" "+f.$t+" ("+m+")",value:f.$t,contact_name:e.name,type_home_mobile:f.rel,g_contact_id:d.id?d.id:""})}}d.gd$phoneNumber&&contacts_bkg_page.push(e)}console.log("*** Done parsing google contacts feed*****");console.log("num entries in googleContactsArray: "+
googleContactsArray.length)}var buildLongInfoString="";
function _c77f98c8706784a9846e1f0893bb7f802629b9c5bf1d3bbc7feae12ce25ea0154a45e8bacb43a977(a,b,c,d){console.log("number ending, to match, is: "+c);var e=_e5060d2c27c7281e56dbdcf304356f8db9812b78749fa825d1f9d8e78bd2495940f92586c04ef35a(c,7);console.log("number ending, to match, ZERO PADDED to 7 digits is: "+e);for(var g="",h="",f=!1,k=a.feed.entry.length,m=0;m<k;m++){var p=a.feed.entry[m],s=p.title.$t;if(p.link&&p.gd$phoneNumber){console.log(p.gd$phoneNumber);console.log("For number_ending="+c+' -- in entry: Link and PhoneNumber, now traverse "links" and check for image/* and gd$etag\u2026.');
for(var r=p.gd$phoneNumber,l=0,n;l<r.length;l++){n=r[l];var j=_824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(n.$t),q=j.substring(j.length-7);console.log("For zero padded number_ending="+e+"..Phone Number in Google Contacts is: "+n.$t);console.log("Sanitized Google Contact Phone Number is: "+j);console.log("last 7 digits of  sanitized g contact # is: "+q);if(q==e){f=!0;""==h&&(h=s);j=p.link;for(n=0;n<j.length;n++)console.log("linklist index is  "+n),q=j[n],"image/*"==
q.type&&void 0!=q.gd$etag&&(console.log('found "image" and gd$etag entry in links list for contact: '+s),g=q.href,console.log("**** Single Num - GOT IMAGE FOR: "+s+" --\> "+g+"&oauth_token="+b))}}}else if(p.gd$phoneNumber){console.log("For "+c+" -- At least one Phone Number found in this entry..");p=p.gd$phoneNumber;for(n=0;n<p.length;n++)console.log("----------------------------------------")}}f?(console.log("** Found explicit phone number match! -- Best info --- "+c+" -- Name: "+h+" -- Best Image: "+
g),newBestGoogleContactsArray.push({phone_num_clean:c,name:h,thumbnail_image:g}),$.jStorage.set(c,{name:h,thumbnail_image_google_base_url:g,time_stored:_4e34cd86f4085f8f1e6ba0efffaefaa176937b96f9cce24ef5a74e998667cafc03bcc67d9bad0746()}),a="",e="#name-if-known-"+c,f="#thumbnail-if-known-"+c,k=$(".ui-tabs-selected a").attr("id"),a=""==g?"img/silhouette.jpg":g+"&oauth_token="+b,d&&($(e).text(h),c==k&&$("#thread-heading-name").text(h),$(f).attr("src",a))):console.log("No contact match found based on # ending with: "+
c)}
function _a0490cdb023c115a91c22ea05ae412b29710663c2c1dfc3f9ba6addb8ad06733e293a4b0a1c7e4e1(a){document.getElementById("top-notif-bar").innerHTML="";_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Current google_login_status is "+google_login_status);_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Current login_and_beta_ready is "+login_and_beta_ready);selected_tab=$("#resultholder").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=
0);void 0!=a&&(document.getElementById("msg").innerHTML=a)}function _ee7a79567cdac2e42cf78a5c7361dcbc60be57d538dfc442cabe3dc21e89cd0ddae73e780377a01a(a){a="#thread-count-live-updated-"+a;$(a).text(parseInt($(a).text())+1);$(a).hide().fadeIn(600);$(a).siblings("#timestamp-last-msg").text(_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(new Date,!1))}
function _ba9598f30f8cec312d6f13fe55ac146264a4e5494222ee50a11fbe85210c79018d2de0ff6c1dbfcc(a){a=jQuery.parseJSON(a);if(void 0!==a.new_content){if(a=a.new_content,!(-1<a.body.search("CAPI_HEALTH_CHECK")||-1<a.body.search("USER_UPDATED_SETTINGS_IN_WEBAPP"))){var b=$(".ui-tabs-selected a").attr("id");a.phone_num_clean==b&&(b="",61==a.inbox_outbox&&(b="sms-reply"),$("#sms-thread-content").append('<li id="sms-line-item-msgid-'+a.id+'" class="sms-line-item JUST-PUSHED-FROM-CLOUD '+b+'"><div id="sms-body-msgid-'+
a.id+'" class="sms-body" >'+_35bc8f7ecd1f005948cc936caa8285543000d8de54ea0e2cff66f47a1326ea83bc10459b4a1fa5d5(a.body)+'</div>  <span class="sms-time" id="unknown">(just now...)</span></li>'),$("#sms-body-msgid-"+a.id).show("highlight",{color:"#F9EEC0"},3E3),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()));if(61!=a.inbox_outbox&&84!=a.type&&85!=a.type){var c="",d="";10==a.type?(c="Message from ",d="'"+a.body+"'"):11==a.type?void 0!==a.mms_object_key?(c="MMS from ",d="'"+a.body+
"' (MMS Downloaded)"):(c="MMS from ",d="Image Downloading on Phone..."):80==a.type?c="Incoming Call from ":81==a.type&&(c="Missed Call from ");d=_35bc8f7ecd1f005948cc936caa8285543000d8de54ea0e2cff66f47a1326ea83bc10459b4a1fa5d5(d);b=[];0!=a.phone_num_clean&&(b=$.jStorage.get(a.phone_num_clean,"no-jstorage-val-found"));var e="",e=b.name?b.name:a.phone_num;$("#msg").fadeOut(500,function(){$(this).html("<B>"+c+e+': </B><span style="font-weight:normal">'+d+"</span>").fadeIn(1E3)});var g="#"+a.phone_num_clean;
objNewSettings&&0==objNewSettings.notif_toggle_on_off?(console.log("*** DONT POPUP NOTIFICATION - USER PREFERENCE"),b=!1):b=!0;if(window.webkitNotifications&&"Chrome"!=BrowserDetect.browser&&b){var h=3E4,f="";objNewSettings&&objNewSettings.notif_dismiss_time&&(h=1E3*objNewSettings.notif_dismiss_time,console.log("setting notif_dismissal_time to: "+h));var f=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click to see message...":d,k=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png",
c+e,f);k.ondisplay=function(){inWebAppGlobalNotifArray.push(k);setTimeout("_db080fbf45a01847b37f2ac7f9c70f9b06c7414aac4cec889caaf1e817a64497e238111daf4cd15d();",h)};k.onclick=function(){window.focus();$(g).click();this.cancel()};k.show()}!window.webkitNotifications&&b&&(f=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click OK to see message...":d,alert(c+e+": "+f),!1==_70cecb1b584ba27ace91a2d7c4006f94176db3a96002a7b842c383b9589c5e3167645509c58e0877(1)&&$(g).click())}if(10==a.type||
11==a.type)_ee7a79567cdac2e42cf78a5c7361dcbc60be57d538dfc442cabe3dc21e89cd0ddae73e780377a01a(a.phone_num_clean),_e435f4592c698bb73d2759cf783fc5a5fa1a475d9d331d2474324d2caaae993cde04ec24e9781e7a(a.phone_num_clean,a.phone_num)}}else void 0!==a.ack_processed?(b=a.ack_processed,a="message-status-text-msgid-"+b.id,b="outbox-message-msgid-"+b.id,null!=document.getElementById(a)&&(document.getElementById(a).innerHTML='<B>Phone Sent Message</B> <img style="margin-top:5px" src="checkmark-yes.png">'),null!=
document.getElementById(b)&&(document.getElementById(b).innerHTML='<B>Phone Sent</B> <img src="checkmark-yes.png">')):console.log("unknown incoming CAPI content")}
function _824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(a,b){for(;-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");for(;-1<a.search("[.]");)a=a.replace(".","");for(;-1<a.search("[/]");)a=a.replace("/","");for(;-1<a.search("[+]");)a=a.replace("+","");return a=!b&&7>a.length?_e5060d2c27c7281e56dbdcf304356f8db9812b78749fa825d1f9d8e78bd2495940f92586c04ef35a(a,
7):a.substring(a.length-7)}function _bfdcd97da13cf9fefa1ee851879dfb0e8db1d8c667e78c7168594a78a1a1bfdb7cbfe09ffc51baae(){$("#resultholder").tabs("select",-1);$(".ui-tabs-selected").removeClass("ui-state-active").removeClass("ui-tabs-selected")}
function _45ee4cb2d4fd8c457c77354e8f3ae59a2a225334033cc53e52ab68451304cb751bc9d476d25989ac(){_gaq.push(["_trackEvent","WebApp","Compose-New-Msg-Click","WebAppPageView",1]);if(!$("#settingsPane")[0]&&_70cecb1b584ba27ace91a2d7c4006f94176db3a96002a7b842c383b9589c5e3167645509c58e0877())return!1;_bfdcd97da13cf9fefa1ee851879dfb0e8db1d8c667e78c7168594a78a1a1bfdb7cbfe09ffc51baae();$("#sms-container").css("height","auto");document.getElementById("sms-container").innerHTML='<div id="compose-single-text" style="text-align:left;clear:both;font-size:18px;padding:5px;padding-left:9px;border-left:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-radius:10px">';
contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<h3 style="font-size:21px;margin-bottom:15px;margin-top:10px;padding-bottom:5px;border-bottom: 1px solid rgba(0,0,0,.1)"><b>New Message</b></h3><br><p><B>Send To:</B>  <span style="font-size:12px;color:#3F8CD9;margin-left:10px">(Up to 3 recipients) <a style="font-size:12px;color:#E60;float:right" href="#" onclick="alert(\'Please Note: Your carrier will count an SMS for each recipient. As a reminder, MightyText sends SMS via your phone.\');">important note</a></span></p>';
document.getElementById("compose-single-text").innerHTML+='<div id="friends" style="color:darkgrey; border:1px solid #CCC;margin:0px;margin-right:40px;padding:8px;font-size:15px;height:60px"></div>';document.getElementById("friends").innerHTML+='<input id="compose-number" type="text" size=20 name="compose-number" style="border:none;" />';document.getElementById("compose-single-text").innerHTML+="<br><p><B>Message:</B></p>";document.getElementById("compose-single-text").innerHTML+='<div id="single-text-elements">';
document.getElementById("compose-single-text").innerHTML+='<textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="float:left;height:70px;max-height:80px;width:400px;border:1px solid #CCC;margin:0px;padding:5px;font-size:16px;"></textarea>';document.getElementById("compose-single-text").innerHTML+='<span id="holder-adjacent-sendbox-single-text" style="float:left"><button id="send-button-single-text" style="font-size:14px;margin:0px;padding:7px;margin-left:18px;cclear:both" onclick="_0c9c3c0a2416262c779f5ca43a4c648e9ffb579afe814981bd4309e86b27af6c5261574f5b7a0244();"> Send</button><br><br><span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"></span></span>';
document.getElementById("compose-single-text").innerHTML+='<span id="mms-canvas-single-text" style="">'+_823e15a335a3bffa4dfed2a3c341ca5bbb135ed6d30ce1057c96900a624a4423aedf9f6c7538ca33();document.getElementById("compose-single-text").innerHTML+="</span>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+="<br><br>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+=
'<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#compose-number").focus();objNewSettings&&0==objNewSettings.enter_to_send||$("#send-one-text").unbind("keydown").keydown(function(a){13==a.keyCode&&!a.shiftKey&&(a.preventDefault(),$("#send-one-text").blur(),$("#send-button-single-text").click())});$("#send-one-text").NobleCount("#charsLeft-one-text");
$("#send-one-text").click(function(){0<$("#compose-number").val().length&&_9cfe3740a0abe8869ad33af00a886b1173772fa75a351bc76c60645fd74ac5e1b56b3f9009600c5b()});$("#compose-number").delegate("","keydown",function(a){8==a.keyCode&&1>$("#compose-number").val().length&&$(this).prev("span").remove();188==a.keyCode&&0<$("#compose-number").val().length&&_9cfe3740a0abe8869ad33af00a886b1173772fa75a351bc76c60645fd74ac5e1b56b3f9009600c5b()});$(function(){$("#compose-number").bind("keydown",function(a){a.keyCode===
$.ui.keyCode.TAB&&($(this).data("autocomplete").menu.active?a.preventDefault():_9cfe3740a0abe8869ad33af00a886b1173772fa75a351bc76c60645fd74ac5e1b56b3f9009600c5b())});$("#compose-number").autocomplete({source:contacts_autocomplete_per_unique_phone_num,autoFocus:!0,delay:100,open:function(){$(".ui-menu").css({"z-index":"9999"});$(".ui-menu").css({border:"1px solid #c0c0c0"});_2f64cf87cfe4a038e6c7d675ee434d3554461341f3d8ba7423360b87d1c7c62332949e7cfc1206ec()},select:function(a,b){if(_2f64cf87cfe4a038e6c7d675ee434d3554461341f3d8ba7423360b87d1c7c62332949e7cfc1206ec()){var c;
c=0<b.item.contact_name.length?'<div id="single-compose-contact-name" style="font-size:14px">'+b.item.contact_name+'</div><span id="single-compose-target-phone-num" style="border:none;font-size:12px">'+b.item.value+"</span>":b.item.value;$("<span class='contact-bubble'>").html(c).insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}},change:function(){}});$("#compose-number").autocomplete("widget").addClass("compose-single-text-autocomplete-box");$("#friends").click(function(){$("#compose-number").focus()});
$(".remove",document.getElementById("friends")).live("click",function(){$(this).parent().remove();0===$("#friends span").length&&$("#compose-number").css("top",0)})})}function _2f64cf87cfe4a038e6c7d675ee434d3554461341f3d8ba7423360b87d1c7c62332949e7cfc1206ec(){return 2<$(".contact-bubble").length?($("#compose-number").val(""),$("#compose-number").autocomplete("close"),alert("You already have selected 3 recipients."),!1):!0}
function _9cfe3740a0abe8869ad33af00a886b1173772fa75a351bc76c60645fd74ac5e1b56b3f9009600c5b(){if(!(1>$("#compose-number").val().length)&&_2f64cf87cfe4a038e6c7d675ee434d3554461341f3d8ba7423360b87d1c7c62332949e7cfc1206ec()){var a;a=$("#compose-number").val().replace(",","");a=a.replace("\t","");if(_8e37a8251a0bc48c1c64d85970f4ca52aef60777211e8d17199a7c6f94be2d45e16483d1bf7dca9c(a)){a='<span id="single-compose-target-phone-num" style="border:none">'+a+"</span>";var b=$("<span class='contact-bubble'>").html(a);
$("<a>").addClass("remove").attr({href:"javascript:",title:"Remove "+a}).text("x").appendTo(b);b.insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}else alert(a+" is not a valid phone number"),$("#compose-number").val($("#compose-number").val().replace("\t","")),setTimeout("$('#compose-number').focus();",50)}}
function _7a07368ebb36fb75bb76938ccf26794540bab65c1c2bd95f16f5816d88200711d634dff3d5bfd152(){var a=!1,b=0,c=[];$("#friends .contact-bubble").each(function(){$(this);var a=$(this).children("#single-compose-target-phone-num").text();_8e37a8251a0bc48c1c64d85970f4ca52aef60777211e8d17199a7c6f94be2d45e16483d1bf7dca9c(a)?(b++,c.push(a)):alert(a+" is not in a valid phone number.")});$("#friends input").each(function(){var d=$(this).val();0<d.length&&(b++,_8e37a8251a0bc48c1c64d85970f4ca52aef60777211e8d17199a7c6f94be2d45e16483d1bf7dca9c(d)?
c.push(d):(alert(d+" is not a valid number"),a=!0))});0==b?alert("No recipients entered"):a||_92da26635e1b31dd416ba51e12858b858aa10d211a148a9873bc736f2ea38345dfda4a20a9204999(c,b)}
function _92da26635e1b31dd416ba51e12858b858aa10d211a148a9873bc736f2ea38345dfda4a20a9204999(a,b){_gaq.push(["_trackEvent","WebApp","Send-Message-Compose-New-Window-Click","",b]);$("#msg").empty();$("#send-button-single-text").css({background:"lightgrey",color:"grey"});$("#send-button-single-text").html("Sending...");$("#send-button-single-text").attr("disabled",!0);var c=0==$("#mms-blob-id-holder").text().length;$(a).each(function(a,b){var g=_824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(b,
!0);c?_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453("send_sms","single-compose",b,g,b,_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec,a):_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453("send_mms","single-compose",b,11111,b,"_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec",a,$("#mms-blob-id-holder").text())})}
function _27b7c925eb17ee08bb75ae865b7e8936dec873ce9626b913d72c4f9bd87e9c4a92c14ca9aa2ac991(a){a=_824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(a);return a.substring(a.length-7)}function _8e37a8251a0bc48c1c64d85970f4ca52aef60777211e8d17199a7c6f94be2d45e16483d1bf7dca9c(a){if(""!=a){for(i=0;i<a.length;i++){var b=a.charAt(i);if(0>"+- 1234567890()/][.".indexOf(b))return!1}return!0}return!1}
function _76f33a967c3e5b6a02d657477451a1fec5acc0718ed10396f6a72b7016efdadf4e47eab864a348b4(){$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelTokenForWebApp&client=CRX_WEBAPP&mins=120",dataType:"jsonp",jsonpCallback:"capiwagda",success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);if(0>a.search("valid_token:"))console.log("No valid_token prepend found from Channel API!");else{var a=a.replace("valid_token:",""),b=new goog.appengine.Channel(a);
console.log(b);b=b.open();b.onopen=function(){global_time_last_CAPI_msg_received_webapp=new Date;console.log("Channel Opened via Channel API with token: "+a);console.log("Current time - when channel API new socket is opened : "+Date());_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received","",1]);global_time_last_CAPI_msg_received_webapp=new Date;console.log("**** CHANNEL SOCKET ONMESSAGE *** ");
console.log("Message arrived via CAPI= "+a.data);_ba9598f30f8cec312d6f13fe55ac146264a4e5494222ee50a11fbe85210c79018d2de0ff6c1dbfcc(a.data)};b.onerror=function(){console.log("!!!!!!!!!!!!! TOKEN GONE (via onerror callback)!!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR","",1])};b.onclose=function(){console.log("!!!!!!!!!!!!! TOKEN GONE (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONCLOSE","",1]);setTimeout("_76f33a967c3e5b6a02d657477451a1fec5acc0718ed10396f6a72b7016efdadf4e47eab864a348b4();",
300);console.log("------\> get a new Channel Token")}}}}).responseText}function _7bff26319aec54eb2b3efd3bbf9678e01248cdb384bc7551f0a836d68e7e6bc7857e23bf88add018(){_a91ca16a39c636cf5e59912d34ddd8dc592cf995c7dc2a6779f69768c7b0be3e84707cccc3b77d3d();alert("Welcome to the MightyText Web App!");window.location.reload()}
function _2b9185b22a0803a22f1fb86a0b4fa3389b4cfc13ba13776f5a33ad16a66449074422e80e7be8eff4(a){$.ajax({url:"uservoice_sso.php",global:!1,type:"POST",timeout:1E4,data:"useremail="+a,error:function(){},success:function(a){if(0<=a.indexOf("success")){uvOptions={sso:a.split(/\{([^}]+)\}/)[1]};a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/mJ2EXFuxIoJI4z24dEDKTA.js";var c=document.getElementsByTagName("script")[0];
c.parentNode.insertBefore(a,c)}else console.log("proper sso token not retrieved from uservoice helper php script")}})}function promptUserForNewContactsOauthFlow(){document.getElementById("one-off-notify-user").innerHTML='<a style="font-size:14px;color:cyan"  href="'+newContactsOAuthURL+'" onclick="">Sync with Google Contacts</a>to see names'}
function _e5b8429b107481b36d0463baf17bf340d9e2a258d034fd017ea37d0d4213ba001fc333fc70f1e138(){document.getElementById("user-actions").innerHTML="";document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="positive button" onclick="if(_1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006()) {document.getElementById(\'msg\').innerHTML=\'\';_45ee4cb2d4fd8c457c77354e8f3ae59a2a225334033cc53e52ab68451304cb751bc9d476d25989ac();}"> <span class="pen icon"></span>Compose New</button>';
document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="button" onclick="_e8255ce1e016df6b487b6a796cd6d4e0cb0f754a4b1a62d54f5d635ceffa0118244d63e07779e04a();"><span class="reload icon"></span>Reload</button>';_c04141c441c0cf4630e1459bf7091f0d21fff8ecb3753bfaff7db56556f5bb9a615abd30fbc67535()}
function _1e90e61568a57942888af04eed2f3f3d6bd15c4d573ef192788e58495f2d165a5a6cd82e999fb006(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages. Not signed in. ** </span>';return!1}
function _e8255ce1e016df6b487b6a796cd6d4e0cb0f754a4b1a62d54f5d635ceffa0118244d63e07779e04a(){_gaq.push(["_trackEvent","WebApp","App-Reload-Within-App","WebAppPageView",1]);$("#main-section").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#resultholder").tabs("disable");$("#resultholder").tabs("destroy");$("#resultholder").unbind("tabsselect");$("#tabs-phone-threads").empty();$("#sms-thread-content").empty();
_2149aa8a6a988ed81eeba8605a1817e72749d8a9ccf6183e00d58c4c6be393efade4f14424fc445f();_53a1792027e6562f2acb3d82e9b02a9ec2a05bbbc7c1e614af846633b585281af20148f6c686cde7(!0)}
function _5dce6aeb0ddfd36c8166fc755d9c64a0e5d314e6db82738386eaf0a636595a397e94ffefeb81ac8e(){document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;"> '+google_username_currently_logged_in+' | <a id="sign-out-link" href="'+signOutUrl+'"> Sign Out</a></span>';$("#sign-out-link").click(function(){_gaq.push(["_trackEvent","WebApp","SignOut-Link-Click","",1])})}var highlight_msg_id_from_search_global="";
function _bb35a5a20aa6dddaa78039fa7acbab08732f3bbec7c2fb95df8abc3d46561d614144a3d9282264ca(){$.ui.autocomplete.prototype._renderItem=function(a,b){var c=b.label.replace(RegExp("^"+this.term),"<span style='font-weight:bold;color:Blue;'>"+this.term+"</span>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)}}
function _b1c3b366040b577d80998f53f04b5984485356620d89e18e802e9054907596bf2c5a60db164d9a84(){searchAutocompleteArray=[];var a=baseUrl+"/content?function=getPendingMessages&time_delay=180";console.log("getting Pending Outbound Messages");$.ajax({url:a,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"pending_outbound_msgs",success:function(a){$.each(a.messages,function(a,b){4>a&&$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+b.id+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">'+
b.body+" --\> "+b.phone_num_clean+'<span class="sms-time" id="outbox-message-msgid-'+b.id+'">Request sent. <img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span></li>')})}})}
function _1f8bf1054a2ba888e4fcfea98e7c9e868cf654fbff409765f8bd21e0d8e47cfd7ddc509ccb2d2ffd(a,b,c){var d="",e="",g="",h="";"END"==b?(h="&start_range=0&end_range=40",$("#sms-thread-content").empty()):h="&start_range=40&end_range=20000";h=baseUrl+"/content?function=GetMessages"+h;console.log("Get Messages for: "+a);""!=a&&(h+="&phone_num="+encodeURIComponent(a));$.ajax({url:h,global:!1,type:"GET",timeout:9E3,dataType:"jsonp",jsonpCallback:"getTheUsersMessages",error:function(a,b,c){$("#main-section").unblock();
$("#list-of-tabs").unblock();_bfdcd97da13cf9fefa1ee851879dfb0e8db1d8c667e78c7168594a78a1a1bfdb7cbfe09ffc51baae();alert("Error in GetMessages: "+c)},statusCode:{500:function(){alert("Error 500")}},success:function(f){_gaq.push(["_trackEvent","WebApp","Load-Thread-Tab-Click","WebAppPageView",1]);$("#main-section").unblock();$("#list-of-tabs").unblock();$.each(f.messages,function(a,b){var c,f="",h="";c=!1;e="";if("80"==b.type||"81"==b.type||"82"==b.type||"83"==b.type||"84"==b.type||"85"==b.type)c=!0;
"61"==b.inbox_outbox&&!c&&(e=" sms-reply");if("11"==b.type||"70"==b.type)h=baseUrl+"/imageserve?function=fetchFile&id="+b.id,f='<div id="mms-scale-down" style="height: 60px"><a id="fancyimagepopup" style="margin-left:25px;" href="'+h+'"> <img style="vertical-align:middle;height:100%" src="'+h+'" alt="Photo in process"></a></div>';var l="",h="";c&&(l=" calling-line-item",h=" calling-line-item-color-styling");c=""+('<li id="sms-line-item-msgid-'+b.id+'" class="sms-line-item'+e+l+'">');b.body=_35bc8f7ecd1f005948cc936caa8285543000d8de54ea0e2cff66f47a1326ea83bc10459b4a1fa5d5(b.body);
c+='<div id= "sms-body-msgid-'+b.id+'" class="sms-body'+h+'" >'+b.body+f+"</div>";f="";h=b.ts_server;2==b.status_route?f='Pending<span class="tooltip"><span>Message has been sent to MightyText. Waiting for confirmation from your phone that it got sent.</span><img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span>':99==b.status_route&&(h=b.ts_phone_forward);c+='<span class="sms-time" id="message-status-text-msgid-'+b.id+'">'+f+"</span>";b.is_starred?(star_image_url="starred.png",
star_class_at_load="starred"):(star_image_url="unstarred.png",star_class_at_load="unstarred");c=c+'<span class="sms-time">'+_a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(h,!0);c+='<a id="STAR-'+b.id+'" href="#" onclick="_3bdd808e7ce81dbc362ecdc731db2ccb93ab3d8575e60926de32f1d7a2c6855d22bcf076672ea6e4(this);" class="'+star_class_at_load+'"  style="margin-left:5px;margin-right:5px"><img src="'+star_image_url+'"/></a>';c+='<a id="DELETE-MESSAGE-'+b.id+
'"" href="#" onclick="_cabc95525e0e1562d71d180111719e005b93ec830bb3bf0f33a4e8071a265d726a4f202cc0eb4fd4(\''+b.id+"','"+b.phone_num_clean+"','"+b.type+'\'  );" class="delete-message" style="visibility:hidden"><img width=11 height=12 src="trashcan.png"/></a>';c+="</span></li>";d=c+d;g="#sms-body-msgid-"+b.id});"END"==b?($("#sms-thread-content").empty(),$("#sms-thread-content").html(d),$("#thread-heading-name").text(c),40==f.messages.length&&($("#sms-thread-content").prepend("<button id='show-more-messages-prompt' class='button-angel' style='display:block;margin:0px auto;width:90%;font-size:13px;margin-bottom:20px;margin-top:10px; height:35px' onclick=''><B>\u2191 &nbsp&nbsp Show more messages &nbsp&nbsp\u2191</B></button>"),
f="_1f8bf1054a2ba888e4fcfea98e7c9e868cf654fbff409765f8bd21e0d8e47cfd7ddc509ccb2d2ffd('"+a+"','"+g+"');",f+="$('#show-more-messages-prompt').html('<img id=\"getting-more-messages-graphic\" src=\"transparent-ajax-loader.gif\">');_gaq.push(['_trackEvent','WebApp','User-Click-See-More-Messages','',1]);",$("#show-more-messages-prompt").attr("onclick",f)),setTimeout('$("#sms-thread-content").scrollTop(4000000+$("#sms-thread-content").height());',10)):($("#show-more-messages-prompt").remove(),$("#sms-thread-content").prepend(d).fadeIn("slow"),
$("#sms-thread-content").scrollTo(b,4,{offset:-50}));$("#sendbox-main").focus();$("#toggle-calls").attr("checked")||$(".calling-line-item").hide();objNewSettings&&1==objNewSettings.enter_to_send&&$("#sendbox-main").unbind("keydown").keydown(function(a){13==a.keyCode&&!a.shiftKey&&(a.preventDefault(),$("#sendbox-main").blur(),console.log("enter triggered, and blur attempt - KEYDOWN"),$("#send-button-main").click())});""!=highlight_msg_id_from_search_global&&(f="#sms-body-msgid-"+highlight_msg_id_from_search_global,
$(f).css({"font-size":"14px","font-weight":"bolder"}),$(f).css({color:"#243443"}),$("#sms-thread-content").scrollTo(f,400,{offset:-5}));highlight_msg_id_from_search_global="";$(".sms-line-item").mouseover(function(){$(this).find(".delete-message").css("visibility","visible")});$(".sms-line-item").mouseout(function(){$(this).find(".delete-message").css("visibility","hidden")});$("a#fancyimagepopup").fancybox({type:"image",transitionIn:"elastic",transitionOut:"elastic"})}})}
function _35bc8f7ecd1f005948cc936caa8285543000d8de54ea0e2cff66f47a1326ea83bc10459b4a1fa5d5(a){for(;-1<a.search("[\n]");)a=a.replace("\n","<br >");return a=_d9683102d1147e6478281ea75b3fad55442b6c783223d8e2664545fc5ddcaebf7d9b96bccdcf929f(a)}
function _e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453(a,b,c,d,e,g,h,f){var k="",m="";"single-compose"==b?(m="#send-button-single-text",k=$("#send-one-text").val()):"test-sms-send"==b?(m="N/A",k="Sending Test SMS from MightyText"):(m="#send-button-main",k=$("#sendbox-main").val());var p="",p="",s=baseUrl+"/client?function=send";isCorsSupported||(s="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM");var r=new XMLHttpRequest;r.open("POST",s,!0);r.withCredentials=
"true";r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onreadystatechange=function(){if(4==this.readyState&&200==r.status){var f=r.responseText;if(-1<f.indexOf("OK"))if(0<f.indexOf("phone call initiated successfully"))document.getElementById("msg").innerHTML="Your phone is now dialing "+c,document.getElementById("remote-phone-dial").innerHTML="Dial from Phone",alert("Your phone is now dialing "+c+". You should get your phone to talk.");else{if(0<f.indexOf("sent to phone")){var f=
f.split(/\{([^}]+)\}/)[1],j="";"send_sms"==a?j="SMS":"send_mms"==a&&(j="MMS");_ee7a79567cdac2e42cf78a5c7361dcbc60be57d538dfc442cabe3dc21e89cd0ddae73e780377a01a(d);_e435f4592c698bb73d2759cf783fc5a5fa1a475d9d331d2474324d2caaae993cde04ec24e9781e7a(d,c);var l="outbox-message-msgid-"+f;$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+f+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">"'+k+'" --\> '+e+'<span class="sms-time" id="'+
l+'">Sending\u2026</span></li>');document.getElementById(l).innerHTML='Request sent<br>to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">';"single-compose"==b?($("#send-one-text").val(""),$("#compose-number").val(""),_45ee4cb2d4fd8c457c77354e8f3ae59a2a225334033cc53e52ab68451304cb751bc9d476d25989ac(),$("#msg").append(j+" to "+e+"\u2026"),0==h&&$("#msg").prepend("Request sent to MightyText: ")):(document.getElementById("msg").innerHTML="Request sent to MightyText. "+
j+" to "+e,$("#mms-image-preview").hide(),$("#mms-image-preview").attr("src",""),$("#mms-blob-id-holder").text(""),$("#send-button-main").text("Send"),$("#send-button-main").attr("disabled",!1),$("#send-button-main").css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"}),$("#charsLeft-main").text("500"),j="message-status-text-msgid-"+f,k=_35bc8f7ecd1f005948cc936caa8285543000d8de54ea0e2cff66f47a1326ea83bc10459b4a1fa5d5(k),$('<li id="sms-line-item-msgid-'+
f+'"  class="sms-line-item sms-reply JUST-SENT"><div id="sms-body-msgid-'+f+'" class="sms-body" style="display:none" '+p+">"+k+'</div>  <span class="sms-time" id="'+j+'">Sending\u2026</span></li>').appendTo("#sms-thread-content"),$("#sms-body-msgid-"+f).fadeIn("fast"),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()),document.getElementById(j).innerHTML='Sent to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">',$("#sendbox-main").val(""),
setTimeout('$("#sendbox-main").focus();',0))}}else-1<f.indexOf("LOGIN_REQUIRED")?(alert("Not logged in to MightyText."),_4c9bb75ca1ce509a520702640546924555ed72083ec84b590784c77886570f7136714dda4eb3bb43(m)):-1<f.indexOf("DEVICE_NOT_REGISTERED")?(alert("Android Phone not registered with MightyText with this Google Account, or MightyText Android App not installed properly."),_4c9bb75ca1ce509a520702640546924555ed72083ec84b590784c77886570f7136714dda4eb3bb43(m)):-1<f.indexOf("DeviceQuotaExceeded")?(alert("Android Phone Quota Exceeded.  Error Code: DeviceQuotaExceeded (C2DM)"),
_4c9bb75ca1ce509a520702640546924555ed72083ec84b590784c77886570f7136714dda4eb3bb43(m)):(alert("General Error when issuing C2DM request."),_4c9bb75ca1ce509a520702640546924555ed72083ec84b590784c77886570f7136714dda4eb3bb43(m),g("general_error",r))}};if("send_sms"==a)if(-1<k.search("0-35")){var l="deviceType=ac2dm&action=set_env&action_data="+encodeURIComponent(k);alert("Switching Android Env to: "+k)}else-1<k.search("MIGHTYPROD")?(l="deviceType=ac2dm&action=set_env&action_data=prod",alert("Switching Android Env to: "+
k)):l="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(k);else"send_mms"==a?l="phone="+encodeURIComponent(c)+"&type=11&source_client=31&deviceType=ac2dm&action=send_mms&action_data="+encodeURIComponent(k)+"&mms_object_key="+encodeURIComponent(f):"make_automated_call"==a?l="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=make_automated_call&action_data="+encodeURIComponent(k):"get_latest_messages_from_phone"==
a?l="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=get_latest_messages_from_phone&action_data="+encodeURIComponent(k):"mark_single_message_read"==a?l="deviceType=ac2dm&type=10&source_client=31&action=mark_single_message_read&action_data="+encodeURIComponent(k):"mark_whole_thread_read"==a&&(l="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+encodeURIComponent(k));isCorsSupported||(l=l+"&wagdaedunn="+ckSharedGlobal);r.send(l)}
function _4c9bb75ca1ce509a520702640546924555ed72083ec84b590784c77886570f7136714dda4eb3bb43(a){$(a).text("Send");$(a).attr("disabled",!1);$(a).css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"});"#send-button-main"==a?$("#sendbox-main").focus():$("#send-one-text").focus()}
function _76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec(a){console.log("listener called for sendSMS function. status returned is: "+a)}
function _fba3e50af37dda01861e92b8903d34cb4a4c96982c8b9832646c407ca780d8c4df2dc567db9f9037(a){$.ajax({url:"easyXDM/easyXDM.min.js",dataType:"script",cache:!0,success:function(b,c){easyXDM.DomHelper.requiresJSON("easyXDM/json2.js");console.log(b);console.log(c);console.log("XDM JS Load was performed.");_2a1566052a9e30a562c3b4efaf287048aeb2dcc4c107380cb56391c83697020184ea9e039d91b37e(a)}})}
function _358240df1161c74d06cdf5eef204ab593df4abb0ef554b291eccedf160c808636ce2788fe17f0bb1(a){a=a.toString();console.log("rightmost_digits_to_find is: "+a);console.log("length of rightmost_digits_to_find is: "+a.length);7>a.length&&(a=_e5060d2c27c7281e56dbdcf304356f8db9812b78749fa825d1f9d8e78bd2495940f92586c04ef35a(a,7),console.log("after padding: "+a));for(var b=Array(2),c=0;c<googleContactsArray.length;c++){var d=_824922b5bbf98dcc9c9462797b2fba269ee76417d23d9814e051bed122369f0751f122f662989a96(googleContactsArray[c].phone_number_full).search(a);
if(-1<d)return console.log("FOUND "+a+" in Google Contact Array- substring match position is: "+d+" matched with: "+googleContactsArray[c].phone_number_full),b[0]=googleContactsArray[c].name,b[1]=googleContactsArray[c].thumbnail,b}return""}function _a3607b9af2cefc7244e918fe24b49176741de140e65d6c0ea73eb7a95b335a4d8b22ed79788cfda0(){return""}
function _2d286c6e7fbfa2724e11bd138d5a23d0a38935e5720428798a2e1c2a8fb53b67ad630bb49838b462(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"}
function _604c9c4f01599010628ebbd08675fdd4054292563188db3f9446e4820a6436507f089b1f3a836b6d(a){for(var a=a+"=",b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}function _7a35dd6c6ec9d4b1e2d3f1499c66ff23a8cc69e055b95026228656693385d9af9f9c55ba61f29836(a){_2d286c6e7fbfa2724e11bd138d5a23d0a38935e5720428798a2e1c2a8fb53b67ad630bb49838b462(a,"",-1)}
function _e5060d2c27c7281e56dbdcf304356f8db9812b78749fa825d1f9d8e78bd2495940f92586c04ef35a(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function _a91ca16a39c636cf5e59912d34ddd8dc592cf995c7dc2a6779f69768c7b0be3e84707cccc3b77d3d(){$.ajax({type:"GET",url:baseUrl+"/whitelist?function=setBetaFlag",dataType:"jsonp",jsonpCallback:"setflag",success:function(){window.location.reload()}}).responseText}
function _f2d419f6c14d03c63b002c44106c2f1aceca1c403e65f84cccbd3f2d10608292edf324b7966126ba(){$.blockUI({message:""});$.ajax({type:"GET",url:baseUrl+"/imageupload",dataType:"jsonp",timeout:3E3,jsonpCallback:"getimageuploadcode",success:function(a){_fba3e50af37dda01861e92b8903d34cb4a4c96982c8b9832646c407ca780d8c4df2dc567db9f9037(a);$.unblockUI();_df09e3894c6b9ee03424c5533eab28d54f51b6f941fde1d273588889a3ec950b3013787cba28e302()},error:function(a,b,c){alert("Error in getting File Upload URL: "+c);$.unblockUI();
console.log("error in _f2d419f6c14d03c63b002c44106c2f1aceca1c403e65f84cccbd3f2d10608292edf324b7966126ba")}});return!1}function _77ea4dbb43f802c2ca5b52d1c33cfb57cdf7d5806341e003520bc779c996d2490305a597ff45a8ae(a){$.ajax({type:"POST",url:"check_admin.php",data:{email_check_pso:a},success:function(a){"true"!=a&&(alert("No dev access!"),window.location="https://mightytext.net")}})}
function _a2f83c2da4009cc5f2cf51da96357cbddae94cc60a46e7c326b90f55d5a26d2c416616e3d2eec1dd(a){$.ajax({type:"POST",url:"https://mightytext.net/app/checkpwd.php",data:{pwd:a},success:function(a){"true"==a?(_a91ca16a39c636cf5e59912d34ddd8dc592cf995c7dc2a6779f69768c7b0be3e84707cccc3b77d3d(),setTimeout("window.location.reload();",2E3)):(alert("Not a valid passcode..."),window.location="http://mightytext.net")}})}
function _3bdd808e7ce81dbc362ecdc731db2ccb93ab3d8575e60926de32f1d7a2c6855d22bcf076672ea6e4(a){var b=$(a).attr("id").substr(5),c=baseUrl+"/content?function=updateMsgInfo";$(a).hasClass("starred")?$.ajax({type:"GET",url:c,dataType:"jsonp",jsonpCallback:"make_unstarred",data:{id:b,is_starred:0},success:function(b){!1==b.updated?alert("Error - Message not Un-Favorited. Please report to MightyText team (Error Code: UNFAV7411)"):($(a).removeClass("starred"),$(a).addClass("unstarred"),$(a).find("img").attr("src",
"unstarred.png"))}}).responseText:$.ajax({type:"GET",url:c,dataType:"jsonp",jsonpCallback:"make_starred",data:{id:b,is_starred:1},success:function(b){!1==b.updated?alert("Error - Message not Favorited. Please report to MightyText team (Error Code: FAV3985)"):($(a).removeClass("unstarred"),$(a).addClass("starred"),$(a).find("img").attr("src","starred.png"))}}).responseText}
function _6b07cd136cfe39050303f03848ca18725cee2d757197aab2aa1010716c7ac34668ce1efa0a6647ce(){if(_70cecb1b584ba27ace91a2d7c4006f94176db3a96002a7b842c383b9589c5e3167645509c58e0877())return!1;_bfdcd97da13cf9fefa1ee851879dfb0e8db1d8c667e78c7168594a78a1a1bfdb7cbfe09ffc51baae();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"getUserSettingsCallBack",
success:function(a){_842135f7a4b54f19675e39dad628c686049b1e7af266f2203412cd281a20c031f33f9c215b2dbb21(a.usersettings)}})}
function _8055416920ff9bad0421d4ebc6aacb9afc1ec4bf56a7cc2a8a49d8c094ff8b5d6548d9b84df51e6c(a){if(_70cecb1b584ba27ace91a2d7c4006f94176db3a96002a7b842c383b9589c5e3167645509c58e0877())return!1;_bfdcd97da13cf9fefa1ee851879dfb0e8db1d8c667e78c7168594a78a1a1bfdb7cbfe09ffc51baae();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"GET",dataType:"jsonp",jsonpCallback:"getUserSettingsCallBack",
success:function(b){a&&_842135f7a4b54f19675e39dad628c686049b1e7af266f2203412cd281a20c031f33f9c215b2dbb21(b.usersettings);globalSettingsJSONUponLoad=b.usersettings;globalSettingsJSONUponLoad.settings_list?objNewSettings=jQuery.parseJSON(globalSettingsJSONUponLoad.settings_list.value):(objNewSettings=jQuery.parseJSON("{}"),_8b4fb5b4d7d522d2ea9e4c4427dcff975e07a30bfe85b11fb29ae3cf6ca9eaaa025972868e628b58("settings_list",'{"enter_to_send":1,"notif_content":2}',!1))}})}var helperGlobalSettingsObjectSetter;
function _0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(a,b){helperGlobalSettingsObjectSetter=objNewSettings;eval("helperGlobalSettingsObjectSetter."+a+" = "+b);var c=$.toJSON(helperGlobalSettingsObjectSetter);_8b4fb5b4d7d522d2ea9e4c4427dcff975e07a30bfe85b11fb29ae3cf6ca9eaaa025972868e628b58("settings_list",c,!0)}
function _8b4fb5b4d7d522d2ea9e4c4427dcff975e07a30bfe85b11fb29ae3cf6ca9eaaa025972868e628b58(a,b,c){c&&$("#msg").html("Saving Settings...");var d="",e=baseUrl+"/usersettings?function=updateUserSettings",e=e+("&"+a+"="+encodeURIComponent(b));isCorsSupported||(e="https://mightytext.net/proxy-in-root.php?route=updateUserSettings",d="&wagdaedunn="+ckSharedGlobal,d+="&"+a+"="+encodeURIComponent(b));$.ajax({url:e,global:!1,xhrFields:{withCredentials:!0},type:"POST",data:d,dataType:"json",success:function(a){c&&
("success"==a.usersettings?document.getElementById("msg").innerHTML="Settings saved.":document.getElementById("msg").innerHTML="Error updating setting.",_3a7d7c6b8e6967ba3a6313cf1bc30d737effd0185d913613f27488b9aff20ee13b6b830e66d68711("USER_UPDATED_SETTINGS_IN_WEBAPP:"))}})}
function _c51ab999fbe75d79d8c39e7cf9f2a0568bf91c578238e60aca22e26445e49670bf3f82463e7f8a25(a){var b=$("#sendbox-main").val();if(a){if(1>b.length)return alert("Message is blank"),$("#sendbox-main").focus(),!1;if(500<b.length)return alert("Message is > 500 Characters long."),!1}return!0}
function _7c9a11fdbf06d249536d31c3aa3fa1f16a31fcf1575fdd8f0189dd279570bd6305189862d8bd1dd4(){var a;a='<div id="holder-msg"> <div id="msg" class="user-alert" style=""></div></div><div id="sms-container"><div id="sms-thread-heading" style="float:left;width:100%;z-index:10;padding-bottom:10px;margin-bottom:0px;margin-top:0px;text-align:left;clear:both;border-bottom:1px solid #CCC;background-color:#0099CC;border-radius: 5px 5px 0px 0px;">';a+='<span id="thread-heading-name" style="font-size:22px;padding-left:10px;margin-top:13px;margin-left:5px;color:white;float:left;-webkit-text-stroke: 1px transparent;font-weight:500" class="tk-proxima-nova-condensed"></span>';
a+='<span id="thread-heading-actions" style="float:right;margin-top:5px">';a+='<button id="delete-all-from-sender" style="float:right;font-size:11px;padding:7px" class="negative button" onclick="nothing_placeholder"><span class="trash icon"></span> Delete all</button>';a+='<button id="remote-phone-dial" style="float:right;font-size:13px;margin-left:10px;padding-left:5px" class="positive" onclick="_e28d7cd8ca8f106766fba49ca8f3bafc471578eea6c9edb2a1d1f81e4f3a5fbb78a3c8fe6f978453(\'send_sms\',\'test-SMS from stub\',111111,11111,\'_76167394bb7f68e28663d588d435be01845d2b4d030530430c7800f858c83ff66c5a09385958a1ec\');"> <img height=14 width=14 style="margin-right:10px" src="phone_call_icon.png">Dial from Phone</button>';
a+='<span style="float:left;color:white;font-size:12px;margin-left:10px;margin-top:7px;margin-right:10px;padding-left:5px"><input type="checkbox" name="show-calls-toggle" value="x" id="toggle-calls" checked onclick="$(\'.calling-line-item\').toggle();"/>Show Calls</span>';a+="</span></div>";a+='<div id="sms-thread-content" class="text-message-list"></div>';a+='<div id="inputsms-main">';a+='<textarea id="sendbox-main" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-inputsms-main\').innerHTML=\'\';" style="float:left;margin-left:10px;width:60%;max-width:60%;height:50px;max-height:90%;border:1px solid #CCC;padding:5px;font-size:16px"></textarea>';
a+='<span style="margin-top:160px"></span>';a+='<span id="holder-adjacent-sendbox" style="float:left"><button id="send-button-main" style="float:left;font-size:13px;margin-left:10px" class="positive" onclick=""> <span class="mail icon"></span>Send</button>';a+='<span id="charsLeft-main" style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;margin-left:10px;margin-top:10px;clear:both;float:left"> </span>';a+="</span>";a+=_823e15a335a3bffa4dfed2a3c341ca5bbb135ed6d30ce1057c96900a624a4423aedf9f6c7538ca33();
a+='<div id="error-text-content-inputsms-main" style="font-weight:bold;color:red;font-size:14px"></div>';a+="</div>";a+="</div>";document.getElementById("main-section").innerHTML=a;$("#sendbox-main").NobleCount("#charsLeft-main")}function _e90d898a618435c9ba2f7dba4a4804d21144cced4e436899bac2a06e7ae899ed6df92f1f0ab4c02d(a){$(a).toggleClass("pressed")}function _1700d70d01f1f5941f4b14b090917e77e0b826ca0ae46b6dbf77766768652c2ef08f1c516e822e20(a,b,c){b=$(b).val().length;$(c).text(a-b)}
function _823e15a335a3bffa4dfed2a3c341ca5bbb135ed6d30ce1057c96900a624a4423aedf9f6c7538ca33(){var a;a='<button id="upload-image-mms" style="float:left;font-size:11px;margin-left:10px" class="positive" onclick="_f2d419f6c14d03c63b002c44106c2f1aceca1c403e65f84cccbd3f2d10608292edf324b7966126ba();"><img height=14 width=14 src="attach-mms-icon.png">MMS</button><div id="holder-mms-image-preview" style="height:60px;max-width: 160px;overflow: auto;border: 1px dashed lightgray;">';a+='<img id="mms-image-preview" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';
a+="</div>";a+='<span id="mms-blob-id-holder" style="display:none"></span>';return a+='<div id="mms-upload-dialog" style="display:none;text-align:left"></div>'}
function _42a13dd06a660e6330f596950ebfaade7f8b2f1d916163bf91f3934b1cec3b452e310195b598ec94(){$("#mms-upload-dialog").empty();var a;a='<form id="frmUpload" style="font-size:20px" method="POST" target="upload_target" enctype="multipart/form-data"> <input id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="104" type="hidden" /><input id="mms-file-attach" type="file" name="myFile" onchange="_31d5c22d093de7849ce39e617a84cef9692694888958171c5c116a235506f9fbd2a39a3d38c8e2f8();"  style="font-size:14px;font-family:arial"/><input type="submit" id="btnSubmit" style="display:none" value="Upload file"/></form>';a+=
'<br><img id="file-upload-progress-indicator" style="display:none" src="upload-progress-pie.gif">';a+='<div id="mms-upload-image-preview-pane" style="height:100px">';a+='<img id="file-just-uploaded" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';a+='<span id="file-uploaded-temp-blobid-holder-in-dialog" style="display:none"></span>';a+="</div>";$("#mms-upload-dialog").html(a)}
function _df09e3894c6b9ee03424c5533eab28d54f51b6f941fde1d273588889a3ec950b3013787cba28e302(){_42a13dd06a660e6330f596950ebfaade7f8b2f1d916163bf91f3934b1cec3b452e310195b598ec94();$("#mms-upload-dialog").dialog({open:function(){$("#mms-dialog-button-ok").attr("disabled",!0);$("#mms-dialog-button-ok").css("color","#BFBFBF");$("#mms-dialog-button-ok").removeClass("hover")},width:400,modal:!0,title:"Attach a Picture (MMS)",buttons:[{text:"OK",id:"mms-dialog-button-ok",click:function(){$("#mms-blob-id-holder").text($("#file-uploaded-temp-blobid-holder-in-dialog").text());
var a=$("#file-just-uploaded").attr("src");$("#mms-image-preview").show();$("#mms-image-preview").attr("src",a);$(this).dialog("close")}},{text:"Cancel",id:"mms-dialog-button-cancel",click:function(){$("#mms-upload-dialog").empty();$("#mms-blob-id-holder").text("");$(this).dialog("close")}}]})}
function _2a1566052a9e30a562c3b4efaf287048aeb2dcc4c107380cb56391c83697020184ea9e039d91b37e(a){var b,c=baseUrl;new easyXDM.Rpc({remote:c+"/itest2.htm",swf:c+"/../easyxdm.swf",onReady:function(){var c=document.getElementById("mms-upload-dialog"),e=document.getElementById("frmUpload");e.action=a;e.style.display="block";c.style.display="block";b=document.getElementById("btnSubmit");e.onsubmit=function(){b.disabled="disabled";$("#file-upload-progress-indicator").show()}}},{local:{returnUploadResponse:function(a){b.disabled=
null;"success"!=a.status?alert("Error uploading attachment."):($("#mms-dialog-button-ok").attr("disabled",!1),$("#mms-dialog-button-ok").css("color","green"),$("#file-upload-progress-indicator").hide(),$("#file-just-uploaded").attr("src",baseUrl+"/imageserve?function=viewFile&blob-key="+a.blobID),$("#file-just-uploaded").show(),$("#file-uploaded-temp-blobid-holder-in-dialog").text(a.blobID))}}})}
function _31d5c22d093de7849ce39e617a84cef9692694888958171c5c116a235506f9fbd2a39a3d38c8e2f8(){"undefined"!==typeof FileReader&&2097152<$("#mms-file-attach")[0].files[0].fileSize?alert("File too large. File upload limit is 2MB"):$("#frmUpload").submit()}var globalSettingsJSONUponLoad,objNewSettings;
function _842135f7a4b54f19675e39dad628c686049b1e7af266f2203412cd281a20c031f33f9c215b2dbb21(a){_gaq.push(["_trackEvent","WebApp","Settings-Pane-Load","",1]);document.getElementById("msg").innerHTML="";$("#sms-container").unblock();$("#sms-container").css("height","90%");document.getElementById("sms-container").innerHTML="";document.getElementById("sms-container").innerHTML='<h2 style="padding:10px;padding-bottom:0px;margin:0;text-align:left"><B>Settings</B></h2><div id="settingsPane" style="color:#333;padding:10px;text-align:left;background-color:white;margin-top:5px;height:90%;overflow-y:scroll"></div>';
document.getElementById("settingsPane").innerHTML+='<div id="numDaysKeepMessagesSelection" class="options-section" style="margin-top:0px"><strong>How Long to Keep Messages</strong>: How long should MightyText keep a copy of SMS, MMS, Call Logs<br><br> <select id="setting_num_days_keep" name="num_days_keep" onchange="_8b4fb5b4d7d522d2ea9e4c4427dcff975e07a30bfe85b11fb29ae3cf6ca9eaaa025972868e628b58(this.name,this.value,true);"><option value="1">1 day</option><option value="14">14 days</option><option value="30">30 days</option><option value="60">60 days</option><option value="180">6 months</option></select></div>';
$('#setting_num_days_keep option[value="'+a.num_days_keep+'"]').attr("selected","selected");if(a.settings_list)if(objNewSettings=jQuery.parseJSON(a.settings_list.value),void 0==objNewSettings||void 0==objNewSettings.enter_to_send)objNewSettings.enter_to_send=1,_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962("enter_to_send",1);else{document.getElementById("settingsPane").innerHTML+='<div id="shouldEnterSendMessage" class="options-section"><strong>Pressing Enter to send message (when typing message)</strong><br><br> <input type="radio" name="enter_to_send" value="1" onclick="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);">Yes, pressing Enter sends message <span style="font-size:11px;color:green">&nbsp (Can use Shift-Enter for new line)</span><br> <input type="radio" name="enter_to_send" value="0" onclick="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);">No, pressing Enter will not send message</div>';
a='[value="'+objNewSettings.enter_to_send+'"]';$("input:radio[name=enter_to_send]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_toggle_on_off)objNewSettings.notif_toggle_on_off=1,_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962("notif_toggle_on_off",1);document.getElementById("settingsPane").innerHTML+='<div id="notificationToggleOnOff" class="options-section"><strong>Popup Notifications</strong>: Display a Popup  on Incoming SMS, MMS, Calls<br><br> <input type="radio" name="notif_toggle_on_off" value="1" onclick="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);">Popup Notifications ON <br> <input type="radio" name="notif_toggle_on_off" value="0" onclick="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);">Popup Notifications OFF<br></div>';
a='[value="'+objNewSettings.notif_toggle_on_off+'"]';$("input:radio[name=notif_toggle_on_off]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_dismiss_time)objNewSettings.notif_dismiss_time=9999,_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962("notif_dismiss_time",9999);document.getElementById("settingsPane").innerHTML+='<div id="notifDismiss" class="options-section"><strong>Popup Notification Auto-Close</strong>: If &amp when to automatically close Popup Notifications<br><span style="font-size:11px;color:green">(Chrome Extension & Firefox-PC only)<a onclick="_3109191b8a2d6f856176ae00c023f9148c46f1ba8a754924f774ba90eee929d8e85bd01c1d6f9728();"> <U>Learn more</U></a></span><br><br> <select id="setting_notif_dismiss" name="notif_dismiss_time" onchange="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);"><option value="9999">Do Not Auto-Close</option><option value="10">After 10 seconds</option><option value="30">After 30 seconds</option><option value="60">After 1 minute</option><option value="300">After 5 minutes</option></select></div>';
$('#setting_notif_dismiss option[value="'+objNewSettings.notif_dismiss_time+'"]').attr("selected","selected");if(void 0==objNewSettings||void 0==objNewSettings.notif_content)objNewSettings.notif_content=2,_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962("notif_content",2);document.getElementById("settingsPane").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Popup Notification Privacy</strong>: When a new text message arrives, what to show in the popup.<br><br> <input type="radio" name="notif_content" value="2" onclick="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);">Sender Name &amp Message Text ("<B>Message from Bob:</B> Running 15 minutes late") <br> <input type="radio" name="notif_content" value="1" onclick="_0d9810c60e1779836ddf9d756e82bd210ce9520927443871965be0ae4bc321ec011d40182ceef962(this.name,this.value);">Only Sender Name ("<B>Message from Bob:</B> Click to see message...")</div>';
a='[value="'+objNewSettings.notif_content+'"]';$("input:radio[name=notif_content]").filter(a).attr("checked",!0);document.getElementById("settingsPane").innerHTML+='<div id="adminTools" class="options-section"><strong>Misc</strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_719065480e5f8fd606557846f557e1372eb7e2db894d0769b566591364920a5bc260b688b6721750();">Send a test SMS (to USA #)</button>';void 0==current_server_stored_google_contacts_token?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"window.location='"+newContactsOAuthURL+"';\">Link Google Contacts</button><br>":document.getElementById("adminTools").innerHTML+='<button onclick="_21407653fb5e0dccd0f0db39ce608d606700b7876f3a4ae830d368f3ab6bda2bc6a51673c43c8452();">Unlink from Google Contacts</button><br>';document.getElementById("adminTools").innerHTML+="<button onclick=\"_a7a8f33ae8677d681a187c048bd64089f6a67f76140c5b200307222070d26992ffa81976bb3c46b0('push_phone_contacts_to_cloud','na');\">Refresh Contacts from Phone</button>";
document.getElementById("adminTools").innerHTML+='<button onclick="_ebb7fa556e7ea0b2c30fef141b36d6c81a7f637e69066e6f21f06b378d1edf7d0de78ed92eb3666d();">Clear local Contact Name Cache</button>';document.getElementById("settingsPane").innerHTML+="</div>"}else objNewSettings=jQuery.parseJSON("{}"),_8b4fb5b4d7d522d2ea9e4c4427dcff975e07a30bfe85b11fb29ae3cf6ca9eaaa025972868e628b58("settings_list",'{"enter_to_send":1,"notif_content":2}',!1)}
function _ebb7fa556e7ea0b2c30fef141b36d6c81a7f637e69066e6f21f06b378d1edf7d0de78ed92eb3666d(){var a=$.jStorage.index();console.log(a);$.jStorage.flush()}
function _3109191b8a2d6f856176ae00c023f9148c46f1ba8a754924f774ba90eee929d8e85bd01c1d6f9728(){alert("This setting will only work if running the Chrome Extension(PC or Mac), or using Firefox on a PC.  \n\n It won't work for Firefox-Mac users using Growl as the notification dismiss timeout is set within Growl.\n\nSafari & Internet Explorer users: We plan to have a notifications feature soon.")}
function _a031ab7cf3062c697cb122f49143b6370e8f4dc3f2f3035aa9496b52b741bf16a40afbbcd7d0837d(a){null==window.localStorage?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference")}
function _21b309e57deed76896054c1c8477b1aa8fb43f6d58fd213b2e7fe3c44772c55aad8f8d42e3dedba3(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:500,block_negative:!0,cloak:!1,in_dom:!1}}
function _2fb3d27cdbd6276a206b44efd93650b9dfa8e3f3129c076b1b22377d422ab090eeb17b40332eb158(a){null==window.localStorage?_e7f62bf521107bc01363b1d59ee5a985ef836b75282d8e73f252def298b4f0621a13699b78247d02("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _11d288b4cbf7d3e95dfa0faed82f2a0082cd048e37896d08bed9eed7db10b61e401550e58ce3cab2(a,b,c){a=document.getElementById(a);b=document.getElementById(b);a.value.length>c?a.value=a.value.substring(0,c):b.value=c-a.value.length}
function _a3e714a352c7965e2ac2158c81d85f0c7437c2eca50d63c4c876caf99e4e9f9c5fb1e6ab7ee86839(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);b='<table class="'+b+'">';if(c){var b=b+"<thead><tr>",d;for(d in a[0])b+='<th scope="col">'+d+"</th>";b+="</tr></thead>"}b+="<tbody>";for(c=0;c<a.length;c++){b+=0==c%2?'<tr class="alt">':"<tr>";for(d in a[c])b+="<td>"+a[c][d]+"</td>";b+="</tr>"}return b+="</tbody></table>"}
function _2660d4ed8755d1733fde062de7bee94479f81484ad1ad7d4e6a58c48aa5bee0a32d9d777a092e1f0(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);for(var a=JSON.parse(a),b='<table class="'+b+'"><tbody>',d=0;d<a.length;d++){var e=0,g;for(g in a[d])b+=0==e%2?'<tr class="alt">':"<tr>",c&&(b+='<th scope="row">'+g+"</th>"),b+="<td>"+a[d][g]+"</td>",b+="</tr>",e++}b+="</tbody>";return b+="</table>"}
function _ffa7e31ad8087f383a44e0fac52510341313f96e10401b9d14133b4eccd26c8fc830d82ffde60957(){setTimeout("_16ee2393c9366e53e5d1d7453f4a47bee1ba5d36c5458a5588e717763de9fb6163d876a2bec07d3e();",5E3)}function _16ee2393c9366e53e5d1d7453f4a47bee1ba5d36c5458a5588e717763de9fb6163d876a2bec07d3e(){$.titleAlert("New SMS Received!",{requireBlur:!1,stopOnFocus:!0,duration:3E4,interval:1500})}
function _d9683102d1147e6478281ea75b3fad55442b6c783223d8e2664545fc5ddcaebf7d9b96bccdcf929f(a){return a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")}function _a877160a75c844226a4fe42ff88c2a1e78edc290c1086ca5d2c1317aae27e13f2569440783c14257DisplayPurposes(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("MMM DD h:mm a")}
function _7d377a9f02b1639662ce30da37ed59711cb91af56d49b635ef99f0facd3f266edd09657478536872(){$.ajax({url:"https://1-dot-0-58-dot-textyserver.appspot.com/test?function=test500",global:!1,type:"POST",xhrFields:{withCredentials:!0},statusCode:{500:function(){alert("Error 500")}},success:function(a){alert(a);console.log(a)}})}var ckSharedGlobal="";function _2ff5ff4c1b38f76931b8a0b6372bbb3b2c40edcf04c7c383662a0037a20a3ae896d59d5c64565c8a(a){ckSharedGlobal=a}
function _007da3070cf5d971c02039558ec9e28cf2094e70588560f81720e74c27d87a32244b2ac6a1ab977a(){$.ajax({url:baseUrl+"/test?function=showstuff",global:!1,type:"GET",timeout:8E3,jsonpCallback:"_2ff5ff4c1b38f76931b8a0b6372bbb3b2c40edcf04c7c383662a0037a20a3ae896d59d5c64565c8a",dataType:"jsonp",error:function(){},success:function(){}})}isCorsSupported||_007da3070cf5d971c02039558ec9e28cf2094e70588560f81720e74c27d87a32244b2ac6a1ab977a();
function _2d286c6e7fbfa2724e11bd138d5a23d0a38935e5720428798a2e1c2a8fb53b67ad630bb49838b462(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}function _2d286c6e7fbfa2724e11bd138d5a23d0a38935e5720428798a2e1c2a8fb53b67ad630bb49838b462InSeconds(a,b,c){var d=new Date;d.setTime((new Date).getTime()+1E3*c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}
function _69d99d987b4a138926f4fc52510c26138d26ec68329bccc75b40306e1ada36378bd690c9000f9c6c(){return"withCredentials"in new XMLHttpRequest?!0:!1}function _e1addd5bb3e47358766339e8f2087c3262f81619f3a81fa5adfd0d122feff03f65cd8e0fde6405b6(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}
function _9c6a2b465ba0b6510162f08bb2900b3037dccc3482fc39f4dfe2ec6ee8053dab1800d52c01833b1b(){return $.ajax({type:"GET",url:"https://www.googleapis.com/plus/v1/people/me?pp=1&key=testwgda",cache:!1,jsonpCallback:"testConnection",dataType:"jsonp",success:function(){console.log("Network ping to FB -- fine...");return!0},error:function(){alert(1);return!1}})}
function _1e7236cb77343463cf57049c32e8f3b6f9eead3c7125b75c05ba950ae1ea67ccba993c9f52928509(){var a=new XMLHttpRequest;a.overrideMimeType("text/plain; charset=x-user-defined");a.open("GET","http://jonathanleighton.com/images/me.jpg",!1);a.send(null);for(var b="",c=0;c<a.responseText.length;c++)b+=String.fromCharCode(a.responseText.charCodeAt(c)&255);a="data:image/jpeg;base64,"+window.btoa(b);$("#mtlogo").attr("src",a)}
function _3a7d7c6b8e6967ba3a6313cf1bc30d737effd0185d913613f27488b9aff20ee13b6b830e66d68711(a){console.log(" ");console.log("------------------------------------------------ Sending CAPI Test Message from WebApp -----------------------------------");body_text_to_send=a+" ---- "+Date();$.ajax({url:baseUrl+"/test?function=capi&body="+body_text_to_send+"&phone_num=555555555",global:!1,type:"GET",jsonpCallback:"testCAPIFromWebApp",dataType:"jsonp",success:function(a){console.log(a);-1!=a.search("user not logged in")?
console.log("User is not logged in to MightyText -- found out during CAPI time check"):-1!=a.search("CAPI test sent successfully")&&console.log("Successfully SENT CAPI test message from WebAPP")}})};